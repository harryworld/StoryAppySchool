webpackJsonp([0],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n(1),n(16);var a=n(21),o=n(97),i=r(o),s=n(248),l=r(s),u=n(287),c=r(u),d=n(289),f=r(d),p=n(291),h=r(p);a.Parse.initialize(f["default"].parse.applicationId,f["default"].parse.javascriptKey),c["default"].initialize("UA-68630239-2"),l["default"].run(h["default"],l["default"].HistoryLocation,function(e,t){return c["default"].pageview(t.pathname),i["default"].render(i["default"].createElement(e,null),document.body)})},1:function(e,t){},16:function(e,t){},289:function(e,t,n){var r=n(290);e.exports={parse:{applicationId:r.applicationId,javascriptKey:r.javascriptKey}}},290:function(e,t){e.exports={appName:"Personal",applicationId:"wwE2o8wVZcDnXdEXlmA0950vLqO14YexoYb7zUdo",javascriptKey:"WVlrjOZeJlGsSDSCqOBQFb9BAHII21YJ2ANSwFFO"}},291:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(97),o=r(a),i=n(248),s=n(292),l=r(s),u=n(322),c=r(u),d=n(334),f=r(d),p=n(336),h=r(p),m=n(374),v=r(m),g=n(444),y=r(g),b=n(323),w=r(b),k=n(445),O=r(k),_=n(446),P=r(_),E=n(457),C=r(E);e.exports=o["default"].createElement(i.Route,{name:"app",path:"/",handler:l["default"]},o["default"].createElement(i.DefaultRoute,{name:"dashboard",handler:c["default"]}),o["default"].createElement(i.Route,{path:"/admin",handler:f["default"]}),o["default"].createElement(i.Route,{name:"stories",path:"/stories",handler:h["default"]},o["default"].createElement(i.Route,{name:"bookmarkedStories",path:"/stories/bookmarks"})),o["default"].createElement(i.Route,{name:"newStory",path:"/stories/new",handler:C["default"]}),o["default"].createElement(i.Route,{name:"story",path:"/stories/:id",handler:v["default"]}),o["default"].createElement(i.Route,{name:"resetPassword",path:"/forgot",handler:y["default"]}),o["default"].createElement(i.Route,{name:"login",handler:w["default"]}),o["default"].createElement(i.Route,{name:"logout",handler:O["default"]}),o["default"].createElement(i.Route,{name:"editCurrentUser",path:"/me/edit",handler:P["default"]}))},292:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(248),d=n(293),f=r(d),p=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"app"},u["default"].createElement(f["default"],null),u["default"].createElement(c.RouteHandler,null))}}]),t}(u["default"].Component);t["default"]=p,p.contextTypes={router:u["default"].PropTypes.func},e.exports=t["default"]},293:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(97),o=r(a),i=n(294),s=r(i),l=n(317),u=r(l),c=n(316),d=r(c),f=n(248),p=o["default"].createClass({displayName:"NavigationBar",mixins:[f.State],render:function(){var e=d["default"].loggedIn()?"stories":"dashboard",t=o["default"].createElement(f.Link,{to:e},o["default"].createElement("img",{src:n(320)})),r=void 0,a=void 0;(this.isActive("story")||this.isActive("newStory"))&&(t=o["default"].createElement(f.Link,{className:"back-button",to:"stories"},o["default"].createElement("img",{src:n(321)}),"Back"));var i=o["default"].createElement("form",null,o["default"].createElement("input",{type:"search",placeholder:"Search"}));return a=this.getRoutes()&&"newStory"===this.getRoutes()[1].name?"New Story":i,this.isActive("stories")&&(a=o["default"].createElement("div",{className:"grid-block align-center"},o["default"].createElement("div",{className:"grid-block"},o["default"].createElement("div",{className:"grid-content"},i),o["default"].createElement("div",{className:"medium-6 grid-block"},o["default"].createElement(f.Link,{to:"newStory",className:"create-story button hollow"},"Create Story"))))),r=d["default"].loggedIn()?o["default"].createElement(s["default"],null,o["default"].createElement(u["default"],null,o["default"].createElement(f.Link,{to:"bookmarkedStories"},"Bookmarks")),o["default"].createElement(u["default"],null,o["default"].createElement(f.Link,{to:"editCurrentUser"},"Edit Profile")),o["default"].createElement(u["default"],null,o["default"].createElement(f.Link,{to:"logout"},"Logout"))):o["default"].createElement(s["default"],null,o["default"].createElement(u["default"],null,o["default"].createElement(f.Link,{to:"login"},"Login"))),o["default"].createElement("div",{className:"title-bar"},o["default"].createElement("div",{className:"center title"},a),o["default"].createElement("span",{className:"left"},t),o["default"].createElement("span",{className:"right"},r))}});t["default"]=p,e.exports=t["default"]},294:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=(n(21),n(295)),d=r(c),f=n(315),p=r(f),h=n(316),m=r(h),v=n(317),g=(r(v),n(318)),y=r(g),b=d["default"].Component(u["default"]),w=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isShowing:!1,user:e.user},this.toggleShowHide=this.toggleShowHide.bind(this)}return o(t,e),i(t,[{key:"observe",value:function(e){return{user:d["default"].currentUser}}},{key:"toggleShowHide",value:function(){this.setState({isShowing:!this.state.isShowing})}},{key:"render",value:function(){var e=void 0,t=this.data.user;return e=m["default"].loggedIn()?u["default"].createElement("li",null,u["default"].createElement("h1",{className:"signed-in"},"Signed in as"),u["default"].createElement("h1",{className:"username"},y["default"].getDisplayName(t))):u["default"].createElement("li",null,u["default"].createElement("h1",{className:"signed-out"},"Guest")),u["default"].createElement("div",null,u["default"].createElement("div",{className:"drop-down-menu",onClick:this.toggleShowHide},u["default"].createElement("img",{className:"avatar",src:y["default"].getAvatar(t)}),u["default"].createElement("ul",{className:p["default"]("sub-menu","text-left",{hide:!this.state.isShowing})},e,this.props.children)))}}]),t}(b);t["default"]=w,e.exports=t["default"]},316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),a={logIn:function(e,t,n){var a=this;r.Parse.User.logIn(e,t).then(function(){n&&n(!0),a.onChange(!0)},function(e){n&&n(!1),a.onChange(!1)})},logInWithResetPasswordToken:function(e,t){var n=this;r.Parse.Cloud.run("requestToken",{token:e}).then(function(e){return r.Parse.User.become(e)}).then(function(){t&&t(!0),n.onChange(!0)},function(e){t&&t(!1),n.onChange(!1)})},logOut:function(e){var t=this;r.Parse.User.logOut().then(function(){e&&e(),t.onChange(!1)})},loggedIn:function(){return!!r.Parse.User.current()},onChange:function(){}};t["default"]=a,e.exports=t["default"]},317:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=(n(248),function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement("li",{className:"menu-item"},this.props.children)}}]),t}(u["default"].Component));t["default"]=c,e.exports=t["default"]},318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={getDisplayName:function(e){if(e){if(e.displayName)return e.displayName;if(e.username)return e.username}return"Jane Doe"},getAvatar:function(e){var t=void 0;if(e){if(e.smallAvatar?t=e.smallAvatar:e.largeAvatar&&(t=e.largeAvatar),t&&t._url)return t._url;if(t&&t.url)return t.url}return n(319)}};t["default"]=r,e.exports=t["default"]},319:function(e,t,n){e.exports=n.p+"a5b7d39ee4008b5c51c2d39c84b25647.png"},320:function(e,t,n){e.exports=n.p+"13d8069da9d86ece6770aa992016e68a.svg"},321:function(e,t,n){e.exports=n.p+"5ca2e7e7d2e30c354eeb952639a1e622.svg"},322:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(323),d=r(c),f=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement("div",null,u["default"].createElement(d["default"],null))}}]),t}(u["default"].Component);t["default"]=f,e.exports=t["default"]},323:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(21),d=n(248),f=n(324),p=(r(f),n(325)),h=r(p),m=n(327),v=r(m),g=n(333),y=r(g),b=n(316),w=r(b),k=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.submit=this.submit.bind(this),this.keyDown=this.keyDown.bind(this),this.clickLogin=this.clickLogin.bind(this),this.getEmail=this.getEmail.bind(this),this.toggleGoogleLogin=this.toggleGoogleLogin.bind(this),this.state={error:null,_notificationSystem:null}}return o(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;this._notificationSystem=this.refs.notificationSystem,w["default"].loggedIn()?this.context.router.transitionTo("stories"):(h["default"].on("auth.login",function(t){h["default"](t.network).api("/me").then(function(t){e.setCurrentUser(t.email)})}),h["default"].init({google:"410488590343-jkvabi78vvd7gejnlpl7bpu1omplgfi4.apps.googleusercontent.com"},{redirect_uri:"login"}))}},{key:"render",value:function(){var e=void 0;return this.state.error&&(e=u["default"].createElement(y["default"],{messages:[this.state.error]})),u["default"].createElement("form",{className:"session grid-block",onKeyDown:this.keyDown},u["default"].createElement("div",{className:"grid-container small-18"},u["default"].createElement("h1",null,"Login"),u["default"].createElement("input",{ref:"email",className:"email",type:"email",placeholder:"your@email.com"}),u["default"].createElement("input",{ref:"password",className:"password",type:"password",placeholder:"password"}),u["default"].createElement("div",{className:"grid-block align-right"},u["default"].createElement("input",{className:"button login-google",type:"submit",value:"Google",onClick:this.toggleGoogleLogin}),u["default"].createElement("input",{className:"button login-password",type:"submit",value:"Login",onClick:this.clickLogin})),u["default"].createElement("div",{className:"grid-block align-right"},u["default"].createElement(d.Link,{to:"resetPassword"},"Forgot my password")),e),u["default"].createElement("div",null,u["default"].createElement(v["default"],{ref:"notificationSystem"})))}},{key:"getEmail",value:function(){return u["default"].findDOMNode(this.refs.email).value}},{key:"toggleGoogleLogin",value:function(e){e.preventDefault(),h["default"].login("google",{scope:"email"})}},{key:"setCurrentUser",value:function(e){var t=this;c.Parse.Cloud.run("getUserSessionToken",{email:e}).then(function(e){return c.Parse.User.become(e)}).then(function(){t.context.router.transitionTo("stories")},function(e){t._notificationSystem.addNotification({message:"User not found!",level:"error"}),t._notificationSystem.addNotification({message:"Please contact your administrator.",level:"error"}),t.context.router.transitionTo("login")})}},{key:"submit",value:function(){var e=this,t=this.getEmail(),n=u["default"].findDOMNode(this.refs.password).value;return t||n?t?n?void w["default"].logIn(t,n,function(t){t?(e.setState({error:null}),e.context.router.transitionTo("stories")):e.setState({error:"Email / Password combination is incorrect"})}):void this.setState({error:"Please fill in password"}):void this.setState({error:"Please fill in email"}):void this.setState({error:"Please fill in email and password"})}},{key:"keyDown",value:function(e){13===e.keyCode&&this.clickLogin(e)}},{key:"clickLogin",value:function(e){e.preventDefault(),this.submit()}}],[{key:"willTransitionTo",value:function(e,t,n,r){n&&n.token?w["default"].logInWithResetPasswordToken(n.token,function(t){t?(e.redirect("stories"),r()):(e.redirect("login"),r())}):r()}}]),t}(u["default"].Component);t["default"]=k,k.contextTypes={router:u["default"].PropTypes.func},e.exports=t["default"]},325:function(e,t,n){var r;(function(a,o){/*! hellojs v1.9.6 | (c) 2012-2015 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */
Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Object.keys||(Object.keys=function(e,t,n){n=[];for(t in e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,a=0;n>a;a++)a in t&&e.call(r,t[a],a,t);return this}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n=[];return this.forEach(function(r,a,o){e.call(t||void 0,r,a,o)&&n.push(r)}),n}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=[];return this.forEach(function(r,a,o){n.push(e.call(t||void 0,r,a,o))}),n}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(e){window.location=e}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=[].slice,r=n.call(arguments,1),a=this,o=function(){return a.apply(this instanceof t?this:e||window,r.concat(n.call(arguments)))};return t.prototype=this.prototype,o.prototype=new t,o});/**
	 * @hello.js
	 *
	 * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.
	 *
	 * @author Andrew Dodson
	 * @website https://adodson.com/hello.js/
	 *
	 * @copyright Andrew Dodson, 2012 - 2015
	 * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.
	 */
var i=function(e){return i.use(e)};i.utils={extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(e instanceof Object&&t instanceof Object&&e!==t)for(var n in t)e[n]=i.utils.extend(e[n],t[n]);else e=t}),e}},i.utils.extend(i,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},default_service:null,force:null,page_uri:window.location.href},services:{},use:function(e){var t=Object.create(this);return t.settings=Object.create(this.settings),e&&(t.settings.default_service=e),t.utils.Event.call(t),t},init:function(e,t){var n=this.utils;if(!e)return this.services;for(var r in e)e.hasOwnProperty(r)&&"object"!=typeof e[r]&&(e[r]={id:e[r]});n.extend(this.services,e);for(r in this.services)this.services.hasOwnProperty(r)&&(this.services[r].scope=this.services[r].scope||{});return t&&(n.extend(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=n.url(t.redirect_uri).href)),this},login:function(){function e(e,t){i.emit(e,t)}function t(e){return e}function n(e){return!!e}var r,a=this,o=a.utils,s=o.error,l=o.Promise(),u=o.args({network:"s",options:"o",callback:"f"},arguments),c=o.diffKey(u.options,a.settings),d=u.options=o.merge(a.settings,u.options||{});if(d.popup=o.merge(a.settings.popup,u.options.popup||{}),u.network=u.network||a.settings.default_service,l.proxy.then(u.callback,u.callback),l.proxy.then(e.bind(this,"auth.login auth"),e.bind(this,"auth.failed auth")),"string"!=typeof u.network||!(u.network in a.services))return l.reject(s("invalid_network","The provided network was not recognized"));var f=a.services[u.network],p=o.globalEvent(function(e){var t;t=e?JSON.parse(e):s("cancelled","The authentication was not completed"),t.error?l.reject(t):(o.store(t.network,t),l.fulfill({network:t.network,authResponse:t}))}),h=o.url(d.redirect_uri).href,m=f.oauth.response_type||d.response_type;/\bcode\b/.test(m)&&!f.oauth.grant&&(m=m.replace(/\bcode\b/,"token")),u.qs=o.merge(c,{client_id:encodeURIComponent(f.id),response_type:encodeURIComponent(m),redirect_uri:encodeURIComponent(h),display:d.display,scope:"basic",state:{client_id:f.id,network:u.network,display:d.display,callback:p,state:d.state,redirect_uri:h}});var v=o.store(u.network),g=/[,\s]+/,y=(d.scope||"").toString()+","+u.qs.scope;if(v&&"scope"in v&&v.scope instanceof String&&(y+=","+v.scope),y=y.split(g),y=o.unique(y).filter(n),u.qs.state.scope=y.join(","),y=y.map(function(e){if(e in f.scope)return f.scope[e];for(var t in a.services){var n=a.services[t].scope;if(n&&e in n)return""}return e}),y=y.join(",").split(g),y=o.unique(y).filter(n),u.qs.scope=y.join(f.scope_delim||","),d.force===!1&&v&&"access_token"in v&&v.access_token&&"expires"in v&&v.expires>(new Date).getTime()/1e3){var b=o.diff((v.scope||"").split(g),(u.qs.state.scope||"").split(g));if(0===b.length)return l.fulfill({unchanged:!0,network:u.network,authResponse:v}),l}if("page"===d.display&&d.page_uri&&(u.qs.state.page_uri=o.url(d.page_uri).href),"login"in f&&"function"==typeof f.login&&f.login(u),(!/\btoken\b/.test(m)||parseInt(f.oauth.version,10)<2||"none"===d.display&&f.oauth.grant&&v&&v.refresh_token)&&(u.qs.state.oauth=f.oauth,u.qs.state.oauth_proxy=d.oauth_proxy),u.qs.state=encodeURIComponent(JSON.stringify(u.qs.state)),1===parseInt(f.oauth.version,10)?r=o.qs(d.oauth_proxy,u.qs,t):"none"===d.display&&f.oauth.grant&&v&&v.refresh_token?(u.qs.refresh_token=v.refresh_token,r=o.qs(d.oauth_proxy,u.qs,t)):r=o.qs(f.oauth.auth,u.qs,t),"none"===d.display)o.iframe(r,h);else if("popup"===d.display)var w=o.popup(r,h,d.popup),k=setInterval(function(){if((!w||w.closed)&&(clearInterval(k),!l.state)){var e=s("cancelled","Login has been cancelled");w||(e=s("blocked","Popup was blocked")),e.network=u.network,l.reject(e)}},100);else window.location=r;return l.proxy},logout:function(){function e(e,t){i.emit(e,t)}var t=this,n=t.utils,r=n.error,a=n.Promise(),o=n.args({name:"s",options:"o",callback:"f"},arguments);if(o.options=o.options||{},a.proxy.then(o.callback,o.callback),a.proxy.then(e.bind(this,"auth.logout auth"),e.bind(this,"error")),o.name=o.name||this.settings.default_service,o.authResponse=n.store(o.name),!o.name||o.name in t.services)if(o.name&&o.authResponse){var s=function(e){n.store(o.name,""),a.fulfill(i.utils.merge({network:o.name},e||{}))},l={};if(o.options.force){var u=t.services[o.name].logout;if(u)if("function"==typeof u&&(u=u(s,o)),"string"==typeof u)n.iframe(u),l.force=null,l.message="Logout success on providers site was indeterminate";else if(void 0===u)return a.proxy}s(l)}else a.reject(r("invalid_session","There was no session to remove"));else a.reject(r("invalid_network","The network was unrecognized"));return a.proxy},getAuthResponse:function(e){return e=e||this.settings.default_service,e&&e in this.services?this.utils.store(e)||null:null},events:{}}),i.utils.extend(i.utils,{error:function(e,t){return{error:{code:e,message:t}}},qs:function(e,t,n){if(t){n=n||encodeURIComponent;for(var r in t){var a="([\\?\\&])"+r+"=[^\\&]*";reg=new RegExp(a),e.match(reg)&&(e=e.replace(reg,"$1"+r+"="+n(t[r])),delete t[r])}}return this.isEmpty(t)?e:e+(e.indexOf("?")>-1?"&":"?")+this.param(t,n)},param:function(e,t){var n,r,a={};if("string"==typeof e){if(t=t||decodeURIComponent,r=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var o=0;o<r.length;o++)n=r[o].match(/([^=]+)=(.*)/),a[n[1]]=t(n[2]);return a}t=t||encodeURIComponent;var i=e;a=[];for(var s in i)i.hasOwnProperty(s)&&i.hasOwnProperty(s)&&a.push([s,"?"===i[s]?"?":t(i[s])].join("="));return a.join("&")},store:function(){function e(){var e={};try{e=JSON.parse(n.getItem("hello"))||{}}catch(t){}return e}function t(e){n.setItem("hello",JSON.stringify(e))}for(var n,r=["localStorage","sessionStorage"],a=-1,o="test";r[++a];)try{n=window[r[a]],n.setItem(o+a,a),n.removeItem(o+a);break}catch(i){n=null}if(!n){var s=null;n={getItem:function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].replace(/(^\s+|\s+$)/,"");if(r&&0===r.indexOf(e))return r.substr(e.length)}return s},setItem:function(e,t){s=t,document.cookie=e+"="+t}},s=n.getItem("hello")}return function(n,r,a){var o=e();if(n&&void 0===r)return o[n]||null;if(n&&null===r)try{delete o[n]}catch(i){o[n]=null}else{if(!n)return o;o[n]=r}return t(o),o||null}}(),append:function(e,t,n){var r="string"==typeof e?document.createElement(e):e;if("object"==typeof t)if("tagName"in t)n=t;else for(var a in t)if(t.hasOwnProperty(a))if("object"==typeof t[a])for(var o in t[a])t[a].hasOwnProperty(o)&&(r[a][o]=t[a][o]);else"html"===a?r.innerHTML=t[a]:/^on/.test(a)?r[a]=t[a]:r.setAttribute(a,t[a]);return"body"===n?!function i(){document.body?document.body.appendChild(r):setTimeout(i,16)}():"object"==typeof n?n.appendChild(r):"string"==typeof n&&document.getElementsByTagName(n)[0].appendChild(r),r},iframe:function(e){this.append("iframe",{src:e,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),this.extend.apply(null,e)},args:function(e,t){var n={},r=0,a=null,o=null;for(o in e)if(e.hasOwnProperty(o))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[o])for(o in t[0])if(e.hasOwnProperty(o)&&o in e)return t[0];for(o in e)if(e.hasOwnProperty(o))if(a=typeof t[r],"function"==typeof e[o]&&e[o].test(t[r])||"string"==typeof e[o]&&(e[o].indexOf("s")>-1&&"string"===a||e[o].indexOf("o")>-1&&"object"===a||e[o].indexOf("i")>-1&&"number"===a||e[o].indexOf("a")>-1&&"object"===a||e[o].indexOf("f")>-1&&"function"===a))n[o]=t[r++];else if("string"==typeof e[o]&&e[o].indexOf("!")>-1)return!1;return n},url:function(e){if(e){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(e,window.location);var t=document.createElement("a");return t.href=e,t}return window.location},diff:function(e,t){return t.filter(function(t){return-1===e.indexOf(t)})},diffKey:function(e,t){if(e||!t){var n={};for(var r in e)r in t||(n[r]=e[r]);return n}return e},unique:function(e){return Array.isArray(e)?e.filter(function(t,n){return e.indexOf(t)===n}):[]},isEmpty:function(e){if(!e)return!0;if(Array.isArray(e))return!e.length;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},/*!
		 **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
		 **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>
		 **  Licensed under The MIT License <http://opensource.org/licenses/MIT>
		 **  Source-Code distributed on <http://github.com/rse/thenable>
		 */
Promise:function(){var e=0,t=1,n=2,r=function(t){return this instanceof r?(this.id="Thenable/1.0.6",this.state=e,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new r(t)};r.prototype={fulfill:function(e){return i(this,t,"fulfillValue",e)},reject:function(e){return i(this,n,"rejectReason",e)},then:function(e,t){var n=this,a=new r;return n.onFulfilled.push(u(e,a,"fulfill")),n.onRejected.push(u(t,a,"reject")),s(n),a.proxy}};var i=function(t,n,r,a){return t.state===e&&(t.state=n,t[r]=a,s(t)),t},s=function(e){e.state===t?l(e,"onFulfilled",e.fulfillValue):e.state===n&&l(e,"onRejected",e.rejectReason)},l=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var i=function(){for(var e=0;e<r.length;e++)r[e](n)};"object"==typeof a&&"function"==typeof a.nextTick?a.nextTick(i):"function"==typeof o?o(i):setTimeout(i,0)}},u=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var a;try{a=e(r)}catch(o){return void t.reject(o)}c(t,a)}}},c=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(r){return void e.reject(r)}if("function"!=typeof n)e.fulfill(t);else{var a=!1;try{n.call(t,function(n){a||(a=!0,n===t?e.reject(new TypeError("circular thenable chain")):c(e,n))},function(t){a||(a=!0,e.reject(t))})}catch(r){a||e.reject(r)}}};return r}(),Event:function(){var e=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(t,n){if(n&&"function"==typeof n)for(var r=t.split(e),a=0;a<r.length;a++)this.events[r[a]]=[n].concat(this.events[r[a]]||[]);return this},this.off=function(e,t){return this.findEvents(e,function(e,n){t&&this.events[e][n]!==t||(this.events[e][n]=null)}),this},this.emit=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e);for(var n=function(n,r){t[t.length-1]="*"===n?e:n,this.events[n][r].apply(this,t)},r=this;r&&r.findEvents;)r.findEvents(e+",*",n),r=r.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.findEvents=function(t,n){var r=t.split(e);for(var a in this.events)if(this.events.hasOwnProperty(a)&&r.indexOf(a)>-1)for(var o=0;o<this.events[a].length;o++)this.events[a][o]&&n.call(this,a,o)},this},globalEvent:function(e,t){return t=t||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[t]=function(){try{e.apply(this,arguments)&&delete window[t]}catch(n){console.error(n)}},t},popup:function(e,t,n){var r=document.documentElement;if(n.height){var a=void 0!==window.screenTop?window.screenTop:screen.top,o=screen.height||window.innerHeight||r.clientHeight;n.top=parseInt((o-n.height)/2,10)+a}if(n.width){var s=void 0!==window.screenLeft?window.screenLeft:screen.left,l=screen.width||window.innerWidth||r.clientWidth;n.left=parseInt((l-n.width)/2,10)+s}var u=[];Object.keys(n).forEach(function(e){var t=n[e];u.push(e+(null!==t?"="+t:""))});var c=function(e){var n=window.open(e,"_blank",u.join(","));try{if(n&&n.addEventListener){var r=i.utils.url(t),a=r.origin||r.protocol+"//"+r.hostname;n.addEventListener("loadstart",function(e){var t=e.url;if(0===t.indexOf(a)){var r=i.utils.url(t),o={location:{assign:function(e){n.addEventListener("exit",function(){setTimeout(function(){c(e)},1e3)})},search:r.search,hash:r.hash,href:r.href},close:function(){n.close&&n.close()}};i.utils.responseHandler(o,window),o.close()}})}}catch(o){}return n&&n.focus&&n.focus(),n};return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(e=t+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(e))),c(e)},responseHandler:function(e,t){function n(e,t,n){var a=e.callback,i=e.network;if(o.store(i,e),!("display"in e&&"page"===e.display)){if(n&&a&&a in n){try{delete e.callback}catch(s){}o.store(i,e);var l=JSON.stringify(e);try{n[a](l)}catch(s){}}r()}}function r(){try{e.close()}catch(t){}e.addEventListener&&e.addEventListener("load",function(){e.close()})}var a,o=this,i=e.location;if(a=o.param(i.search),a&&a.state&&(a.code||a.oauth_token)){var s=JSON.parse(a.state);a.redirect_uri=s.redirect_uri||i.href.replace(/[\?\#].*$/,"");var l=s.oauth_proxy+"?"+o.param(a);return void i.assign(l)}if(a=o.merge(o.param(i.search||""),o.param(i.hash||"")),a&&"state"in a){try{var u=JSON.parse(a.state);o.extend(a,u)}catch(c){console.error("Could not decode state parameter")}if("access_token"in a&&a.access_token&&a.network)a.expires_in&&0!==parseInt(a.expires_in,10)||(a.expires_in=0),a.expires_in=parseInt(a.expires_in,10),a.expires=(new Date).getTime()/1e3+(a.expires_in||31536e3),n(a,e,t);else if("error"in a&&a.error&&a.network)a.error={code:a.error,message:a.error_message||a.error_description},n(a,e,t);else if(a.callback&&a.callback in t){var d="result"in a&&a.result?JSON.parse(a.result):!1;t[a.callback](d),r()}a.page_uri&&i.assign(a.page_uri)}else if("oauth_redirect"in a)return void i.assign(decodeURIComponent(a.oauth_redirect))}}),i.utils.Event.call(i),i.utils.responseHandler(window,window.opener||window.parent),function(e){var t={},n={};e.on("auth.login, auth.logout",function(n){n&&"object"==typeof n&&n.network&&(t[n.network]=e.utils.store(n.network)||{})}),function r(){var a=(new Date).getTime()/1e3,o=function(t){e.emit("auth."+t,{network:i,authResponse:s})};for(var i in e.services)if(e.services.hasOwnProperty(i)){if(!e.services[i].id)continue;var s=e.utils.store(i)||{},l=e.services[i],u=t[i]||{};if(s&&"callback"in s){var c=s.callback;try{delete s.callback}catch(d){}e.utils.store(i,s);try{window[c](s)}catch(d){}}if(s&&"expires"in s&&s.expires<a){var f=l.refresh||s.refresh_token;!f||i in n&&!(n[i]<a)?f||i in n||(o("expired"),n[i]=!0):(e.emit("notice",i+" has expired trying to resignin"),e.login(i,{display:"none",force:!1}),n[i]=a+600);continue}if(u.access_token===s.access_token&&u.expires===s.expires)continue;!s.access_token&&u.access_token?o("logout"):s.access_token&&!u.access_token?o("login"):s.expires!==u.expires&&o("update"),t[i]=s,i in n&&delete n[i]}setTimeout(r,1e3)}()}(i),i.api=function(){function e(e){e=e.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(e,t,n){var i=n?n.replace(/^\|/,""):"";return t in o.query?(i=o.query[t],delete o.query[t]):o.data&&t in o.data?(i=o.data[t],delete o.data[t]):n||a.reject(r("missing_attribute","The attribute "+t+" is missing from the request")),i}),e.match(/^https?:\/\//)||(e=u.base+e),o.url=e,n.request(o,function(e,t){if(!o.formatResponse)return void(("object"==typeof t?t.statusCode>=400:"object"==typeof e&&"error"in e)?a.reject(e):a.fulfill(e));if(e===!0?e={success:!0}:e||(e={}),"delete"===o.method&&(e=!e||n.isEmpty(e)?{success:!0}:e),u.wrap&&(o.path in u.wrap||"default"in u.wrap)){var r=o.path in u.wrap?o.path:"default",i=((new Date).getTime(),u.wrap[r](e,t,o));i&&(e=i)}e&&"paging"in e&&e.paging.next&&("?"===e.paging.next[0]?e.paging.next=o.path+e.paging.next:e.paging.next+="#"+o.path),!e||"error"in e?a.reject(e):a.fulfill(e)})}var t=this,n=t.utils,r=n.error,a=n.Promise(),o=n.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);o.method=(o.method||"get").toLowerCase(),o.headers=o.headers||{},o.query=o.query||{},("get"===o.method||"delete"===o.method)&&(n.extend(o.query,o.data),o.data={});var i=o.data=o.data||{};if(a.then(o.callback,o.callback),!o.path)return a.reject(r("invalid_path","Missing the path parameter from the request"));o.path=o.path.replace(/^\/+/,"");var s=(o.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(s in t.services){o.network=s;var l=new RegExp("^"+s+":?/?");o.path=o.path.replace(l,"")}o.network=t.settings.default_service=o.network||t.settings.default_service;var u=t.services[o.network];if(!u)return a.reject(r("invalid_network","Could not match the service requested: "+o.network));if(o.method in u&&o.path in u[o.method]&&u[o.method][o.path]===!1)return a.reject(r("invalid_path","The provided path is not available on the selected network"));o.oauth_proxy||(o.oauth_proxy=t.settings.oauth_proxy),"proxy"in o||(o.proxy=o.oauth_proxy&&u.oauth&&1===parseInt(u.oauth.version,10)),"timeout"in o||(o.timeout=t.settings.timeout),"formatResponse"in o||(o.formatResponse=!0),o.authResponse=t.getAuthResponse(o.network),o.authResponse&&o.authResponse.access_token&&(o.query.access_token=o.authResponse.access_token);var c,d=o.path;o.options=n.clone(o.query),o.data=n.clone(i);var f=u[{"delete":"del"}[o.method]||o.method]||{};if("get"===o.method){var p=d.split(/[\?#]/)[1];p&&(n.extend(o.query,n.param(p)),d=d.replace(/\?.*?(#|$)/,"$1"))}return(c=d.match(/#(.+)/,""))?(d=d.split("#")[0],o.path=c[1]):d in f?(o.path=d,d=f[d]):"default"in f&&(d=f["default"]),o.redirect_uri=t.settings.redirect_uri,o.xhr=u.xhr,o.jsonp=u.jsonp,o.form=u.form,"function"==typeof d?d(o,e):e(d),a.proxy},i.utils.extend(i.utils,{request:function(e,t){function n(e,t){var n;e.authResponse&&e.authResponse.oauth&&1===parseInt(e.authResponse.oauth.version,10)&&(n=e.query.access_token,delete e.query.access_token,e.proxy=!0),!e.data||"get"!==e.method&&"delete"!==e.method||(r.extend(e.query,e.data),e.data=null);var a=r.qs(e.url,e.query);e.proxy&&(a=r.qs(e.oauth_proxy,{path:a,access_token:n||"",then:e.proxy_response_type||("get"===e.method.toLowerCase()?"redirect":"proxy"),method:e.method.toLowerCase(),suppress_response_codes:!0})),t(a)}var r=this,a=r.error;r.isEmpty(e.data)||"FileList"in window||!r.hasBinary(e.data)||(e.xhr=!1,e.jsonp=!1);var o=this.request_cors(function(){return void 0===e.xhr||e.xhr&&("function"!=typeof e.xhr||e.xhr(e,e.query))});if(o)return void n(e,function(n){var a=r.xhr(e.method,n,e.headers,e.data,t);a.onprogress=e.onprogress||null,a.upload&&e.onuploadprogress&&(a.upload.onprogress=e.onuploadprogress)});var i=e.query;if(e.query=r.clone(e.query),e.callbackID=r.globalEvent(),e.jsonp!==!1){if(e.query.callback=e.callbackID,"function"==typeof e.jsonp&&e.jsonp(e,e.query),"get"===e.method)return void n(e,function(n){r.jsonp(n,t,e.callbackID,e.timeout)});e.query=i}if(e.form!==!1){e.query.redirect_uri=e.redirect_uri,e.query.state=JSON.stringify({callback:e.callbackID});var s;if("function"==typeof e.form&&(s=e.form(e,e.query)),"post"===e.method&&s!==!1)return void n(e,function(n){r.post(n,e.data,s,t,e.callbackID,e.timeout)})}t(a("invalid_request","There was no mechanism for handling this request"))},request_cors:function(e){return"withCredentials"in new XMLHttpRequest&&e()},domInstance:function(e,t){var n="HTML"+(e||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return t?window[n]?t instanceof window[n]:window.Element?t instanceof window.Element&&(!e||t.tagName&&t.tagName.toLowerCase()===e):!(t instanceof Object||t instanceof Array||t instanceof String||t instanceof Number)&&t.tagName&&t.tagName.toLowerCase()===e:!1},clone:function(e){if(null===e||"object"!=typeof e||e instanceof Date||"nodeName"in e||this.isBinary(e))return e;if(Array.isArray(e))return e.map(this.clone.bind(this));var t={};for(var n in e)t[n]=this.clone(e[n]);return t},xhr:function(e,t,n,r,a){function o(e){for(var t,n={},r=/([a-z\-]+):\s?(.*);?/gi;t=r.exec(e);)n[t[1]]=t[2];return n}var i=new XMLHttpRequest,s=this.error,l=!1;"blob"===e&&(l=e,e="GET"),e=e.toUpperCase(),i.onload=function(t){var n=i.response;try{n=JSON.parse(i.responseText)}catch(r){401===i.status&&(n=s("access_denied",i.statusText))}var l=o(i.getAllResponseHeaders());l.statusCode=i.status,a(n||("GET"===e?s("empty_response","Could not get resource"):{}),l)},i.onerror=function(e){var t=i.responseText;try{t=JSON.parse(i.responseText)}catch(n){}a(t||s("access_denied","Could not get resource"))};var u;if("GET"===e||"DELETE"===e)r=null;else if(r&&"string"!=typeof r&&!(r instanceof FormData)&&!(r instanceof File)&&!(r instanceof Blob)){var c=new FormData;for(u in r)r.hasOwnProperty(u)&&(r[u]instanceof HTMLInputElement?"files"in r[u]&&r[u].files.length>0&&c.append(u,r[u].files[0]):r[u]instanceof Blob?c.append(u,r[u],r.name):c.append(u,r[u]));r=c}if(i.open(e,t,!0),l&&("responseType"in i?i.responseType=l:i.overrideMimeType("text/plain; charset=x-user-defined")),n)for(u in n)i.setRequestHeader(u,n[u]);return i.send(r),i},jsonp:function(e,t,n,r){var a,o=this,i=o.error,s=0,l=document.getElementsByTagName("head")[0],u=i("server_error","server_error"),c=function(){s++||window.setTimeout(function(){t(u),l.removeChild(d)},0)};n=o.globalEvent(function(e){return u=e,!0},n),e=e.replace(new RegExp("=\\?(&|$)"),"="+n+"$1");var d=o.append("script",{id:n,name:n,src:e,async:!0,onload:c,onerror:c,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&c()}});window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(a=o.append("script",{text:"document.getElementById('"+callbackId+"').onerror();"}),d.async=!1),r&&window.setTimeout(function(){u=i("timeout","timeout"),c()},r),l.appendChild(d),a&&l.appendChild(a)},post:function(e,t,n,r,a,o){var i,s=this,l=s.error,u=document,c=null,d=[],f=0,p=null,h=0,m=function(e){h++||r(e)};s.globalEvent(m,a);var v;try{v=u.createElement('<iframe name="'+a+'">')}catch(g){v=u.createElement("iframe")}if(v.name=a,v.id=a,v.style.display="none",n&&n.callbackonload&&(v.onload=function(){m({response:"posted",message:"Content was posted"})}),o&&setTimeout(function(){m(l("timeout","The post operation timed out"))},o),u.body.appendChild(v),s.domInstance("form",t)){for(c=t.form,f=0;f<c.elements.length;f++)c.elements[f]!==t&&c.elements[f].setAttribute("disabled",!0);t=c}if(s.domInstance("form",t))for(c=t,f=0;f<c.elements.length;f++)c.elements[f].disabled||"file"!==c.elements[f].type||(c.encoding=c.enctype="multipart/form-data",c.elements[f].setAttribute("name","file"));else{for(p in t)t.hasOwnProperty(p)&&s.domInstance("input",t[p])&&"file"===t[p].type&&(c=t[p].form,c.encoding=c.enctype="multipart/form-data");c||(c=u.createElement("form"),u.body.appendChild(c),i=c);var y;for(p in t)if(t.hasOwnProperty(p)){var b=s.domInstance("input",t[p])||s.domInstance("textArea",t[p])||s.domInstance("select",t[p]);if(b&&t[p].form===c)b&&t[p].name!==p&&(t[p].setAttribute("name",p),t[p].name=p);else{var w=c.elements[p];if(y)for(w instanceof NodeList||(w=[w]),f=0;f<w.length;f++)w[f].parentNode.removeChild(w[f]);y=u.createElement("input"),y.setAttribute("type","hidden"),y.setAttribute("name",p),b?y.value=t[p].value:s.domInstance(null,t[p])?y.value=t[p].innerHTML||t[p].innerText:y.value=t[p],c.appendChild(y)}}for(f=0;f<c.elements.length;f++)y=c.elements[f],y.name in t||y.getAttribute("disabled")===!0||(y.setAttribute("disabled",!0),d.push(y))}c.setAttribute("method","POST"),c.setAttribute("target",a),c.target=a,c.setAttribute("action",e),setTimeout(function(){c.submit(),setTimeout(function(){try{i&&i.parentNode.removeChild(i)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(t){}}for(var n=0;n<d.length;n++)d[n]&&(d[n].setAttribute("disabled",!1),d[n].disabled=!1)},0)},100)},hasBinary:function(e){for(var t in e)if(e.hasOwnProperty(t)&&this.isBinary(e[t]))return!0;return!1},isBinary:function(e){return e instanceof Object&&(this.domInstance("input",e)&&"file"===e.type||"FileList"in window&&e instanceof window.FileList||"File"in window&&e instanceof window.File||"Blob"in window&&e instanceof window.Blob)},toBlob:function(e){var t=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,n=e.match(t);if(!n)return e;for(var r=atob(e.replace(t,"")),a=[],o=0;o<r.length;o++)a.push(r.charCodeAt(o));return new Blob([new Uint8Array(a)],{type:n[1]})}}),function(e){var t=e.api,n=e.utils;n.extend(n,{dataToJSON:function(e){var t=this,n=window,r=e.data;if(t.domInstance("form",r)?r=t.nodeListToJSON(r.elements):"NodeList"in n&&r instanceof NodeList?r=t.nodeListToJSON(r):t.domInstance("input",r)&&(r=t.nodeListToJSON([r])),("File"in n&&r instanceof n.File||"Blob"in n&&r instanceof n.Blob||"FileList"in n&&r instanceof n.FileList)&&(r={file:r}),!("FormData"in n&&r instanceof n.FormData))for(var a in r)if(r.hasOwnProperty(a))if("FileList"in n&&r[a]instanceof n.FileList)1===r[a].length&&(r[a]=r[a][0]);else{if(t.domInstance("input",r[a])&&"file"===r[a].type)continue;t.domInstance("input",r[a])||t.domInstance("select",r[a])||t.domInstance("textArea",r[a])?r[a]=r[a].value:t.domInstance(null,r[a])&&(r[a]=r[a].innerHTML||r[a].innerText)}return e.data=r,r},nodeListToJSON:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];!r.disabled&&r.name&&("file"===r.type?t[r.name]=r:t[r.name]=r.value||r.innerHTML)}return t}}),e.api=function(){var e=n.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return e.data&&n.dataToJSON(e),t.call(this,e)}}(i),"object"==typeof chrome&&"object"==typeof chrome.identity&&chrome.identity.launchWebAuthFlow&&!function(){function e(t,n){var r={closed:!1};return chrome.identity.launchWebAuthFlow({url:t,interactive:n},function(t){if(void 0===t)return void(r.closed=!0);var n=i.utils.url(t),a={location:{assign:function(t){e(t,!1)},search:n.search,hash:n.hash,href:n.href},close:function(){}};i.utils.responseHandler(a,window)}),r}i.utils.popup=function(t){return e(t,!0)},i.utils.iframe=function(t){e(t,!1)},i.utils.request_cors=function(e){return e(),!0};var t={};chrome.storage.local.get("hello",function(e){t=e.hello}),i.utils.store=function(e,n){return 0===arguments.length?t:1===arguments.length?t[e]||null:n?(t[e]=n,chrome.storage.local.set({hello:t}),n):null===n?(delete t[e],chrome.storage.local.set({hello:t}),null):void 0}}(),function(e){function t(e){e&&"error"in e&&(e.error={code:"server_error",message:e.error.message||e.error})}function n(t,n,r){if(!("object"!=typeof t||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"error"in t)){var a=("app_folder"!==t.root?t.root:"")+t.path.replace(/\&/g,"%26");a=a.replace(/^\//,""),t.thumb_exists&&(t.thumbnail=r.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/auto/"+a+"?format=jpeg&size=m")+"&access_token="+r.options.access_token),t.type=t.is_dir?"folder":t.mime_type,t.name=t.path.replace(/.*\//g,""),t.is_dir?t.files=a.replace(/^\//,""):(t.downloadLink=e.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/auto/"+a)+"&access_token="+r.options.access_token,t.file="https://api-content.dropbox.com/1/files/auto/"+a),t.id||(t.id=t.path.replace(/^\//,""))}}function r(e){return function(t,n){delete t.query.limit,n(e)}}var a={version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},o={version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"};e.init({dropbox:{name:"Dropbox",oauth:o,login:function(t){t.qs.scope="",delete t.qs.display;var n=decodeURIComponent(t.qs.redirect_uri);0===n.indexOf("http:")&&0!==n.indexOf("http://localhost/")?e.services.dropbox.oauth=a:e.services.dropbox.oauth=o,t.options.popup.width=1e3,t.options.popup.height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":r("metadata/auto/@{parent|}"),"me/folder":r("metadata/auto/@{id}"),"me/folders":r("metadata/auto/"),"default":function(e,t){e.path.match("https://api-content.dropbox.com/1/files/")&&(e.method="blob"),t(e.path)}},post:{"me/files":function(t,n){var r=t.data.parent,a=t.data.name;t.data={file:t.data.file},"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),n("https://api-content.dropbox.com/1/files_put/auto/"+r+"/"+a)},"me/folders":function(t,n){var r=t.data.name;t.data={},n("fileops/create_folder?root=@{root|sandbox}&"+e.utils.param({path:r}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(e){if(t(e),!e.uid)return e;e.name=e.display_name;var n=e.name.split(" ");return e.first_name=n.shift(),e.last_name=n.join(" "),e.id=e.uid,delete e.uid,delete e.display_name,e},"default":function(e,r,a){return t(e),e.is_dir&&e.contents&&(e.data=e.contents,delete e.contents,e.data.forEach(function(t){t.root=e.root,n(t,r,a)})),n(e,r,a),e.is_deleted&&(e.success=!0),e}},xhr:function(e){if(e.data&&e.data.file){var t=e.data.file;t&&(t.files?e.data=t.files[0]:e.data=t)}return"delete"===e.method&&(e.method="post"),!0},form:function(e,t){delete t.state,delete t.redirect_uri}}})}(i),function(e){function t(e){return e.id&&(e.thumbnail=e.picture="https://graph.facebook.com/"+e.id+"/picture"),e}function n(e){return"data"in e&&e.data.forEach(t),e}function r(e,t,n){if("boolean"==typeof e&&(e={success:e}),e&&"data"in e){var r=n.query.access_token;e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.pictures=(e.images||[]).sort(function(e,t){return e.width-t.width}),e.cover_photo&&e.cover_photo.id&&(e.thumbnail=a+e.cover_photo.id+"/picture?access_token="+r),"album"===e.type&&(e.files=e.photos=a+e.id+"/photos"),e.can_upload&&(e.upload_location=a+e.id+"/photos")})}return e}e.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",share:"user_posts",birthday:"user_birthday",events:"user_events",photos:"user_photos,user_videos",videos:"user_photos,user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:"offline_access"},refresh:!0,login:function(e){e.options.force&&(e.qs.auth_type="reauthenticate"),e.options.popup.width=580,e.options.popup.height=400},logout:function(t,n){var r=e.utils.globalEvent(t),a=encodeURIComponent(e.settings.redirect_uri+"?"+e.utils.param({callback:r,result:JSON.stringify({force:!0}),state:"{}"})),o=(n.authResponse||{}).access_token;return e.utils.iframe("https://www.facebook.com/logout.php?next="+a+"&access_token="+o),o?void 0:!1},base:"https://graph.facebook.com/v2.4/",get:{me:"me?fields=email,first_name,last_name,name,timezone,verified","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums?fields=cover_photo,name","me/album":"@{id}/photos?fields=picture","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:t,"me/friends":n,"me/following":n,"me/followers":n,"me/albums":r,"me/photos":r,"me/files":r,"default":r},xhr:function(t,n){return("get"===t.method||"post"===t.method)&&(n.suppress_response_codes=!0),"post"===t.method&&t.data&&"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),!0},jsonp:function(t,n){var r=t.method;"get"===r||e.utils.hasBinary(t.data)?"delete"===t.method&&(n.method="delete",t.method="post"):(t.data.method=r,t.method="get")},form:function(e){return{callbackonload:!0}}}});var a="https://graph.facebook.com/"}(i),function(e){function t(t,n,r){var a=(r?"":"flickr:")+"?method="+t+"&api_key="+e.services.flickr.id+"&format=json";for(var o in n)n.hasOwnProperty(o)&&(a+="&"+o+"="+n[o]);return a}function n(t){var n=e.getAuthResponse("flickr");t(n&&n.user_nsid?n.user_nsid:null)}function r(e,r){return r||(r={}),function(a,o){n(function(n){r.user_id=n,o(t(e,r,!0))})}}function a(e,t){var n="https://www.flickr.com/images/buddyicon.gif";return e.nsid&&e.iconserver&&e.iconfarm&&(n="https://farm"+e.iconfarm+".staticflickr.com/"+e.iconserver+"/buddyicons/"+e.nsid+(t?"_"+t:"")+".jpg"),n}function o(e,t,n,r,a){return a=a?"_"+a:"","https://farm"+t+".staticflickr.com/"+n+"/"+e+"_"+r+a+".jpg"}function i(e){e&&e.stat&&"ok"!=e.stat.toLowerCase()&&(e.error={code:"invalid_request",message:e.message})}function s(e){if(e.photoset||e.photos){var t="photoset"in e?"photoset":"photos";e=u(e,t),d(e),e.data=e.photo,delete e.photo;for(var n=0;n<e.data.length;n++){var r=e.data[n];r.name=r.title,r.picture=o(r.id,r.farm,r.server,r.secret,""),r.pictures=l(r.id,r.farm,r.server,r.secret),r.source=o(r.id,r.farm,r.server,r.secret,"b"),r.thumbnail=o(r.id,r.farm,r.server,r.secret,"m")}}return e}function l(e,t,n,r){var a=2048,i=[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:a}];return i.map(function(a){return{source:o(e,t,n,r,a.id),width:a.max,height:a.max}})}function u(e,t){return t in e?e=e[t]:"error"in e||(e.error={code:"invalid_request",message:e.message||"Failed to get data from Flickr"}),e}function c(e){if(i(e),e.contacts){e=u(e,"contacts"),d(e),e.data=e.contact,delete e.contact;for(var t=0;t<e.data.length;t++){var n=e.data[t];n.id=n.nsid,n.name=n.realname||n.username,n.thumbnail=a(n,"m")}}return e}function d(e){e.page&&e.pages&&e.page!==e.pages&&(e.paging={next:"?page="+ ++e.page})}e.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:r("flickr.people.getInfo"),"me/friends":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":r("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":r("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":r("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(e){if(i(e),e=u(e,"person"),e.id){if(e.realname){e.name=e.realname._content;var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=a(e,"l"),e.picture=a(e,"l")}return e},"me/friends":c,"me/followers":c,"me/following":c,"me/albums":function(e){return i(e),e=u(e,"photosets"),d(e),e.photoset&&(e.data=e.photoset,e.data.forEach(function(e){e.name=e.title._content,e.photos="https://api.flickr.com/services/rest"+t("flickr.photosets.getPhotos",{photoset_id:e.id},!0)}),delete e.photoset),e},"me/photos":function(e){return i(e),s(e)},"default":function(e){return i(e),s(e)}},xhr:!1,jsonp:function(e,t){"get"==e.method&&(delete t.callback,t.jsoncallback=e.callbackID)}}})}(i),function(e){function t(e){!e.meta||400!==e.meta.code&&401!==e.meta.code||(e.error={code:"access_denied",message:e.meta.errorDetail})}function n(e){e&&e.id&&(e.thumbnail=e.photo.prefix+"100x100"+e.photo.suffix,e.name=e.firstName+" "+e.lastName,e.first_name=e.firstName,e.last_name=e.lastName,e.contact&&e.contact.email&&(e.email=e.contact.email))}function r(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t.v=20121125,!0}e.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(e){return t(e),e&&e.response&&(e=e.response.user,n(e)),e},"default":function(e){return t(e),e&&"response"in e&&"friends"in e.response&&"items"in e.response.friends&&(e.data=e.response.friends.items,e.data.forEach(n),delete e.response),e}},xhr:r,jsonp:r}})}(i),function(e){function t(e,t){var n=t?t.statusCode:e&&"meta"in e&&"status"in e.meta&&e.meta.status;(401===n||403===n)&&(e.error={code:"access_denied",message:e.message||(e.data?e.data.message:"Could not get response")},delete e.message)}function n(e){e.id&&(e.thumbnail=e.picture=e.avatar_url,e.name=e.login)}function r(e,t,n){if(e.data&&e.data.length&&t&&t.Link){var r=t.Link.match(/<(.*?)>;\s*rel=\"next\"/);r&&(e.paging={next:r[1]})}}e.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{basic:"",email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(e,r){return t(e,r),n(e),e},"default":function(e,a,o){return t(e,a),Array.isArray(e)&&(e={data:e}),e.data&&(r(e,a,o),e.data.forEach(n)),e}},xhr:function(e){return"get"!==e.method&&e.data&&(e.headers=e.headers||{},e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),!0}}})}(i),function(e){function t(e){return parseInt(e,10)}function n(e){return c(e),e.data=e.items,delete e.items,e}function r(e){return e.error?void 0:(e.name||(e.name=e.title||e.message),e.picture||(e.picture=e.thumbnailLink),e.thumbnail||(e.thumbnail=e.thumbnailLink),"application/vnd.google-apps.folder"===e.mimeType&&(e.type="folder",e.files="https://www.googleapis.com/drive/v2/files?q=%22"+e.id+"%22+in+parents"),e)}function a(e){return{source:e.url,width:e.width,height:e.height}}function o(e){e.data=e.feed.entry.map(u),delete e.feed}function i(e){if(c(e),"feed"in e&&"entry"in e.feed)e.data=e.feed.entry.map(u),delete e.feed;else{if("entry"in e)return u(e.entry);"items"in e?(e.data=e.items.map(r),delete e.items):r(e)}return e}function s(e){e.name=e.displayName||e.name,e.picture=e.picture||(e.image?e.image.url:null),e.thumbnail=e.picture}function l(e,t,n){c(e);if("feed"in e&&"entry"in e.feed){for(var r=n.query.access_token,a=0;a<e.feed.entry.length;a++){var o=e.feed.entry[a];if(o.id=o.id.$t,o.name=o.title.$t,delete o.title,o.gd$email&&(o.email=o.gd$email&&o.gd$email.length>0?o.gd$email[0].address:null,o.emails=o.gd$email,delete o.gd$email),o.updated&&(o.updated=o.updated.$t),o.link){var i=o.link.length>0?o.link[0].href:null;i&&o.link[0].gd$etag&&(i+=(i.indexOf("?")>-1?"&":"?")+"access_token="+r,o.picture=i,o.thumbnail=i),delete o.link}o.category&&delete o.category}e.data=e.feed.entry,delete e.feed}return e}function u(e){var t,n=e.media$group,r=n.media$content.length?n.media$content[0]:{},o=n.media$content||[],i=n.media$thumbnail||[],s=o.concat(i).map(a).sort(function(e,t){return e.width-t.width}),l=0,u={id:e.id.$t,name:e.title.$t,description:e.summary.$t,updated_time:e.updated.$t,created_time:e.published.$t,picture:r?r.url:null,pictures:s,images:[],thumbnail:r?r.url:null,width:r.width,height:r.height};if("link"in e)for(l=0;l<e.link.length;l++){var c=e.link[l];if(c.rel.match(/\#feed$/)){u.upload_location=u.files=u.photos=c.href;break}}if("category"in e&&e.category.length)for(t=e.category,l=0;l<t.length;l++)t[l].scheme&&t[l].scheme.match(/\#kind$/)&&(u.type=t[l].term.replace(/^.*?\#/,""));return"media$thumbnail"in n&&n.media$thumbnail.length&&(t=n.media$thumbnail,u.thumbnail=t[0].url,u.images=t.map(a)),t=n.media$content,t&&t.length&&u.images.push(a(t[0])),u}function c(e){if("feed"in e&&e.feed.openSearch$itemsPerPage){var n=t(e.feed.openSearch$itemsPerPage.$t),r=t(e.feed.openSearch$startIndex.$t),a=t(e.feed.openSearch$totalResults.$t);a>r+n&&(e.paging={next:"?start="+(r+n)})}else"nextPageToken"in e&&(e.paging={next:"?pageToken="+e.nextPageToken})}function d(){function e(e){var n=new FileReader;n.onload=function(n){t(btoa(n.target.result),e.type+o+"Content-Transfer-Encoding: base64")},n.readAsBinaryString(e)}function t(e,t){n.push(o+"Content-Type: "+t+o+o+e),a--,s()}var n=[],r=(1e10*Math.random()).toString(32),a=0,o="\r\n",i=o+"--"+r,s=function(){},l=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(n,r){"string"!=typeof n&&"length"in Object(n)||(n=[n]);for(var i=0;i<n.length;i++){a++;var s=n[i];if("undefined"!=typeof File&&s instanceof File||"undefined"!=typeof Blob&&s instanceof Blob)e(s);else if("string"==typeof s&&s.match(l)){var u=s.match(l);t(s.replace(l,""),u[1]+o+"Content-Transfer-Encoding: base64");
}else t(s,r)}},this.onready=function(e){(s=function(){0===a&&(n.unshift(""),n.push("--"),e(n.join(i),r),n=[])})()}}function f(e,t){var n={};e.data&&"undefined"!=typeof HTMLInputElement&&e.data instanceof HTMLInputElement&&(e.data={file:e.data}),!e.data.name&&Object(Object(e.data.file).files).length&&"post"===e.method&&(e.data.name=e.data.file.files[0].name),"post"===e.method?e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],file:e.data.file}:(n=e.data,e.data={},n.parent&&(e.data.parents=[{id:e.data.parent||"root"}]),n.file&&(e.data.file=n.file),n.name&&(e.data.title=n.name));var r;if("file"in e.data&&(r=e.data.file,delete e.data.file,"object"==typeof r&&"files"in r&&(r=r.files),!r||!r.length))return void t({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var a=new d;a.append(JSON.stringify(e.data),"application/json"),r&&a.append(r),a.onready(function(r,a){e.headers["content-type"]='multipart/related; boundary="'+a+'"',e.data=r,t("upload/drive/v2/files"+(n.id?"/"+n.id:"")+"?uploadType=multipart")})}function p(e){if("object"==typeof e.data)try{e.data=JSON.stringify(e.data),e.headers["content-type"]="application/json"}catch(t){}}var h="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";e.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",login:function(e){"none"===e.qs.display&&(e.qs.display=""),"code"===e.qs.response_type&&(e.qs.access_type="offline"),e.options.force&&(e.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":h,"me/followers":h,"me/contacts":h,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(e,t){var n=e.query.id;delete e.query.id,t(n.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":f,"me/folders":function(e,t){e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},t("drive/v2/files")}},put:{"me/files":f},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},wrap:{me:function(e){return e.id&&(e.last_name=e.family_name||(e.name?e.name.familyName:null),e.first_name=e.given_name||(e.name?e.name.givenName:null),e.emails&&e.emails.length&&(e.email=e.emails[0].value),s(e)),e},"me/friends":function(e){return e.items&&(c(e),e.data=e.items,e.data.forEach(s),delete e.items),e},"me/contacts":l,"me/followers":l,"me/following":l,"me/share":n,"me/feed":n,"me/albums":i,"me/photos":o,"default":i},xhr:function(e){return("post"===e.method||"put"===e.method)&&p(e),!0},form:!1}})}(i),function(e){function t(e){return{source:e.url,width:e.width,height:e.height}}function n(e){return"string"==typeof e?{error:{code:"invalid_request",message:e}}:(e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message}),e)}function r(e){return o(e),e&&"data"in e&&e.data.forEach(a),e}function a(e){e.id&&(e.thumbnail=e.profile_picture,e.name=e.full_name||e.username)}function o(e){"pagination"in e&&(e.paging={next:e.pagination.next_url},delete e.pagination)}e.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",friends:"relationships",publish:"likes comments"},scope_delim:" ",login:function(e){e.qs.display=""},base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(e,t){var n=e.data.id;e.data={},t("media/"+n+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(e){return n(e),"data"in e&&(e.id=e.data.id,e.thumbnail=e.data.profile_picture,e.name=e.data.full_name||e.data.username),e},"me/friends":r,"me/following":r,"me/followers":r,"me/photos":function(e){return n(e),o(e),"data"in e&&(e.data=e.data.filter(function(e){return"image"===e.type}),e.data.forEach(function(e){e.name=e.caption?e.caption.text:null,e.thumbnail=e.images.thumbnail.url,e.picture=e.images.standard_resolution.url,e.pictures=Object.keys(e.images).map(function(n){var r=e.images[n];return t(r)}).sort(function(e,t){return e.width-t.width})})),e},"default":function(e){return e=n(e),o(e),e}},xhr:function(e,t){var n=e.method,r="get"!==n;return r&&("post"!==n&&"put"!==n||!e.query.access_token||(e.data.access_token=e.query.access_token,delete e.query.access_token),e.proxy=r),r},form:!1}})}(i),function(e){function t(e,t){var n,a;return e&&"Message"in e&&(a=e.Message,delete e.Message,"ErrorCode"in e?(n=e.ErrorCode,delete e.ErrorCode):n=r(t),e.error={code:n,message:a,details:e}),e}function n(e,t){var n=t.access_token;return delete t.access_token,e.headers.Authorization="Bearer "+n,"get"!==e.method&&e.data&&(e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),"put"===e.method&&(e.method="patch"),!0}function r(e){switch(e.statusCode){case 400:return"invalid_request";case 403:return"stale_token";case 401:return"invalid_token";case 500:return"server_error";default:return"server_error"}}e.init({joinme:{name:"join.me",oauth:{version:2,auth:"https://secure.join.me/api/public/v1/auth/oauth2",grant:"https://secure.join.me/api/public/v1/auth/oauth2"},refresh:!1,scope:{basic:"user_info",user:"user_info",scheduler:"scheduler",start:"start_meeting"},scope_delim:" ",login:function(e){e.options.popup.width=400,e.options.popup.height=700},base:"https://api.join.me/v1/",get:{me:"user",meetings:"meetings","meetings/info":"meetings/@{id}"},post:{"meetings/start/adhoc":function(e,t){t("meetings/start")},"meetings/start/scheduled":function(e,t){var n=e.data.meetingId;e.data={},t("meetings/"+n+"/start")},"meetings/schedule":function(e,t){t("meetings")}},patch:{"meetings/update":function(e,t){t("meetings/"+e.data.meetingId)}},del:{"meetings/delete":"meetings/@{id}"},wrap:{me:function(e,n){return t(e,n),e.email?(e.name=e.fullName,e.first_name=e.name.split(" ")[0],e.last_name=e.name.split(" ")[1],e.id=e.email,e):e},"default":function(e,n){return t(e,n),e}},xhr:n}})}(i),function(e){function t(e){e&&"errorCode"in e&&(e.error={code:e.status,message:e.message})}function n(e){return e.error?void 0:(e.first_name=e.firstName,e.last_name=e.lastName,e.name=e.formattedName||e.first_name+" "+e.last_name,e.thumbnail=e.pictureUrl,e.email=e.emailAddress,e)}function r(e){return t(e),a(e),e.values&&(e.data=e.values.map(n),delete e.values),e}function a(e){"_count"in e&&"_start"in e&&e._count+e._start<e._total&&(e.paging={next:"?start="+(e._start+e._count)+"&count="+e._count})}function o(e,t){"{}"===JSON.stringify(e)&&200===t.statusCode&&(e.success=!0)}function i(e){e.access_token&&(e.oauth2_access_token=e.access_token,delete e.access_token)}function s(e,t){e.headers["x-li-format"]="json";var n=e.data.id;e.data=("delete"!==e.method).toString(),e.method="put",t("people/~/network/updates/key="+n+"/is-liked")}e.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",friends:"",publish:"w_share"},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/friends":"people/~/connections?count=@{limit|500}","me/followers":"people/~/connections?count=@{limit|500}","me/following":"people/~/connections?count=@{limit|500}","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(e,t){var n={visibility:{code:"anyone"}};e.data.id?n.attribution={share:{id:e.data.id}}:(n.comment=e.data.message,e.data.picture&&e.data.link&&(n.content={"submitted-url":e.data.link,"submitted-image-url":e.data.picture})),e.data=JSON.stringify(n),t("people/~/shares?format=json")},"me/like":s},del:{"me/like":s},wrap:{me:function(e){return t(e),n(e),e},"me/friends":r,"me/following":r,"me/followers":r,"me/share":function(e){return t(e),a(e),e.values&&(e.data=e.values.map(n),e.data.forEach(function(e){e.message=e.headline}),delete e.values),e},"default":function(e,n){t(e),o(e,n),a(e)}},jsonp:function(e,t){i(t),"get"===e.method&&(t.format="jsonp",t["error-callback"]=e.callbackID)},xhr:function(e,t){return"get"!==e.method?(i(t),e.headers["Content-Type"]="application/json",e.headers["x-li-format"]="json",e.proxy=!0,!0):!1}}})}(i),function(e){function t(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t["_status_code_map[302]"]=200,!0}function n(e){return e.id&&(e.picture=e.avatar_url,e.thumbnail=e.avatar_url,e.name=e.username||e.full_name),e}function r(e){"next_href"in e&&(e.paging={next:e.next_href})}e.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json","default":function(e,t){t(e.path+".json")}},wrap:{me:function(e){return n(e),e},"default":function(e){return Array.isArray(e)&&(e={data:e.map(n)}),r(e),e}},xhr:t,jsonp:t}})}(i),function(e){function t(e){if(e.id){if(e.name){var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=e.profile_image_url_https||e.profile_image_url}return e}function n(e){return r(e),a(e),e.users&&(e.data=e.users.map(t),delete e.users),e}function r(e){if(e.errors){var t=e.errors[0];e.error={code:"request_failed",message:t.message}}}function a(e){"next_cursor_str"in e&&(e.paging={next:"?cursor="+e.next_cursor_str})}function o(e){return Array.isArray(e)?{data:e}:e}var i="https://api.twitter.com/";e.init({twitter:{oauth:{version:"1.0a",auth:i+"oauth/authenticate",request:i+"oauth/request_token",token:i+"oauth/access_token"},login:function(e){var t="?force_login=true";this.oauth.auth=this.oauth.auth.replace(t,"")+(e.options.force?t:"")},base:i+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(t,n){var r=t.data;t.data=null;var a=[];r.message&&(a.push(r.message),delete r.message),r.link&&(a.push(r.link),delete r.link),r.picture&&(a.push(r.picture),delete r.picture),a.length&&(r.status=a.join(" ")),r.file?(r["media[]"]=r.file,delete r.file,t.data=r,n("statuses/update_with_media.json")):"id"in r?n("statuses/retweet/"+r.id+".json"):(e.utils.extend(t.query,r),n("statuses/update.json?include_entities=1"))},"me/like":function(e,t){var n=e.data.id;e.data=null,t("favorites/create.json?id="+n)}},del:{"me/like":function(){p.method="post";var e=p.data.id;p.data=null,callback("favorites/destroy.json?id="+e)}},wrap:{me:function(e){return r(e),t(e),e},"me/friends":n,"me/followers":n,"me/following":n,"me/share":function(e){return r(e),a(e),!e.error&&"length"in e?{data:e}:e},"default":function(e){return e=o(e),a(e),e}},xhr:function(e){return"get"!==e.method}}})}(i),function(e){function t(e,t){return null!==e&&"response"in e&&null!==e.response&&e.response.length&&(e=e.response[0],e.id=e.uid,e.thumbnail=e.picture=e.photo_max,e.name=e.first_name+" "+e.last_name,t.authResponse&&null!==t.authResponse.email&&(e.email=t.authResponse.email)),e}function n(e){if(e.error){var t=e.error;e.error={code:t.error_code,message:t.error_msg}}}e.init({vk:{name:"Vk",oauth:{version:2,auth:"https://oauth.vk.com/authorize",grant:"https://oauth.vk.com/access_token"},scope:{basic:"",email:"email",offline_access:"offline"},refresh:!0,login:function(e){e.qs.display=window.navigator&&window.navigator.userAgent&&/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase())?"mobile":"popup"},base:"https://api.vk.com/method/",get:{me:function(e,t){e.query.fields="id,first_name,last_name,photo_max",t("users.get")}},wrap:{me:function(e,r,a){return n(e),t(e,a)}},xhr:!1,jsonp:!0,form:!1}})}(i),function(e){function t(e){return"data"in e&&e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.images&&(e.pictures=e.images.map(n).sort(function(e,t){return e.width-t.width}))}),e}function n(e){return{width:e.width,height:e.height,source:e.source}}function r(e){return"data"in e&&e.data.forEach(function(e){e.photos=e.files="https://apis.live.net/v5.0/"+e.id+"/photos"}),e}function a(e,t,n){if(e.id){var r=n.query.access_token;if(e.emails&&(e.email=e.emails.preferred),e.is_friend!==!1){var a=e.user_id||e.id;e.thumbnail=e.picture="https://apis.live.net/v5.0/"+a+"/picture?access_token="+r}}return e}function o(e,t,n){return"data"in e&&e.data.forEach(function(e){a(e,t,n)}),e}e.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:a,"me/friends":o,"me/contacts":o,"me/followers":o,"me/following":o,"me/albums":r,"me/photos":t,"default":t},xhr:function(t){return"get"===t.method||"delete"===t.method||e.utils.hasBinary(t.data)||("string"==typeof t.data.file?t.data.file=e.utils.toBlob(t.data.file):(t.data=JSON.stringify(t.data),t.headers={"Content-Type":"application/json"})),!0},jsonp:function(t){"get"===t.method||e.utils.hasBinary(t.data)||(t.data.method=t.method,t.method="get")}}})}(i),function(e){function t(e){e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message})}function n(e){if(t(e),e.query&&e.query.results&&e.query.results.profile){e=e.query.results.profile,e.id=e.guid,e.last_name=e.familyName,e.first_name=e.givenName||e.nickname;var n=[];e.first_name&&n.push(e.first_name),e.last_name&&n.push(e.last_name),e.name=n.join(" "),e.email=e.emails&&e.emails[0]?e.emails[0].handle:null,e.thumbnail=e.image?e.image.imageUrl:null}return e}function r(e,n,r){t(e),o(e,n,r);return e.query&&e.query.results&&e.query.results.contact&&(e.data=e.query.results.contact,delete e.query,Array.isArray(e.data)||(e.data=[e.data]),e.data.forEach(a)),e}function a(e){e.id=null,(e.fields||[]).forEach(function(t){"email"===t.type&&(e.email=t.value),"name"===t.type&&(e.first_name=t.value.givenName,e.last_name=t.value.familyName,e.name=t.value.givenName+" "+t.value.familyName),"yahooid"===t.type&&(e.id=t.value)})}function o(e,t,n){return e.query&&e.query.count&&n.options&&(e.paging={next:"?start="+(e.query.count+(+n.options.start||1))}),e}function i(e){return"https://query.yahooapis.com/v1/yql?q="+(e+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}e.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(e){e.options.popup.width=560;try{delete e.qs.state.scope}catch(t){}},base:"https://social.yahooapis.com/v1/",get:{me:i("select * from social.profile(0) where guid=me"),"me/friends":i("select * from social.contacts(0) where guid=me"),"me/following":i("select * from social.contacts(0) where guid=me")},wrap:{me:n,"me/friends":r,"me/following":r,"default":o}}})}(i),r=function(){return i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)),"object"==typeof e&&e.exports&&(e.exports=i)}).call(t,n(67),n(326).setImmediate)},326:function(e,t,n){(function(e,r){function a(e,t){this._id=e,this._clearFn=t}var o=n(67).nextTick,i=Function.prototype.apply,s=Array.prototype.slice,l={},u=0;t.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=u++,r=arguments.length<2?!1:s.call(arguments,1);return l[n]=!0,o(function(){l[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete l[e]}}).call(t,n(326).setImmediate,n(326).clearImmediate)},333:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.messages.map(function(e,t){return u["default"].createElement("p",{key:t},e)});return u["default"].createElement("div",{className:"error-messages"},u["default"].createElement("h1",null,"Uh oh!"),e)}}]),t}(u["default"].Component);t["default"]=c,e.exports=t["default"]},334:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(335),d=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement("div",null,"Admin")}}]),t}(u["default"].Component);t["default"]=c.requireAuth(d);var f=d;t.undecorated=f},335:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){function n(){a(this,n),u(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return o(n,t),l(n,[{key:"render",value:function(){return d["default"].createElement(e,s({},this.props,this.state))}}],[{key:"willTransitionTo",value:function(e){p["default"].loggedIn()||e.redirect("/login",{},{nextPath:e.path})}}]),n}(d["default"].Component)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},c=n(97),d=r(c),f=n(316),p=r(f);t.requireAuth=i},336:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},u=n(97),c=r(u),d=n(21),f=n(295),p=r(f),h=n(315),m=r(h),v=n(337),g=r(v),y=n(335),b=p["default"].Component(c["default"]),w=n(358),k=(w.Spring,{Public:0,Private:1,Open:2}),O=function(e){function t(e){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return o(t,e),s(t,[{key:"observe",value:function(e){return{stories:new d.Parse.Query("Story").equalTo("statusRaw",k.Public).include("creator").descending("createdAt"),bookmarks:new d.Parse.Query("Bookmark").equalTo("creator",d.Parse.User.current()).include("story"),user:p["default"].currentUser}}},{key:"renderBookmarks",value:function(){return this.data.bookmarks.map(function(e){var t=e.story;return c["default"].createElement(g["default"],i({},t,{key:t.id.objectId,isBookmarked:!0}))})}},{key:"renderPublic",value:function(){var e=this;return this.data.stories.map(function(t){var n=e.data.bookmarks.filter(function(e){return 0==e.typeRaw&&e.story.id.objectId===t.id.objectId});return c["default"].createElement(g["default"],i({},t,{key:t.id.objectId,isBookmarked:n.length>0}))})}},{key:"render",value:function(){var e=void 0,t=this.context.router.getCurrentRoutes().filter(function(e){return"bookmarkedStories"==e.name});e=this.pendingQueries().length?c["default"].createElement("div",{className:"loading grid-frame"},"Loading"):t.length?this.renderBookmarks():this.renderPublic();var n=m["default"]({"story-list":!0,bookmarks:t.length>0,"grid-block":!0,"small-up-2":!0,"medium-up-3":!0,"large-up-4":!0,"xlarge-up-5":!0,"xxlarge-up-6":!0});return c["default"].createElement("div",{className:n},e)}}]),t}(b);t["default"]=y.requireAuth(O);var _=O;t.undecorated=_,O.contextTypes={router:c["default"].PropTypes.func.isRequired}},337:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=(n(21),n(248),n(315)),d=(r(c),n(338)),f=r(d),p=n(353),h=r(p),m=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.initData(e),this.onClickLink=this.onClickLink.bind(this)}return o(t,e),i(t,[{key:"initData",value:function(e){var t=0,n=0,r=0;void 0!==this.props.bookmarkCount&&(t=this.props.bookmarkCount),void 0!==this.props.totalLikeCount&&(n=this.props.totalLikeCount),void 0!==this.props.pageCount&&(r=this.props.pageCount),this.state={storyId:this.props.id.objectId,image:this.props.image,title:this.props.title,bookmarkCount:t,isBookmarked:this.props.isBookmarked,totalLikeCount:n,pageCount:r}}},{key:"onClickLink",value:function(e){e.preventDefault(),this.context.router.transitionTo("story",{id:this.state.storyId})}},{key:"formatData",value:function(){void 0===this.state.pageCount&&(this.state.pageCount=0)}},{key:"titleContent",value:function(){return u["default"].createElement("h1",null,this.state.title)}},{key:"imageContent",value:function(){return this.state.image?u["default"].createElement("img",{className:"story-image",src:this.state.image._url}):u["default"].createElement("img",{className:"story-image",src:n(355)})}},{key:"likesContent",value:function(){return u["default"].createElement("span",{className:"likes"},u["default"].createElement(f["default"],{src:n(356)}),this.state.totalLikeCount)}},{key:"pagesContent",value:function(){return u["default"].createElement("span",{className:"pages"},u["default"].createElement(f["default"],{src:n(357)}),this.state.pageCount)}},{key:"render",value:function(){return u["default"].createElement("div",{className:"story-list-item vertical grid-block"},u["default"].createElement("header",{className:"grid-content small-24 square-aspect-ratio"},u["default"].createElement("div",{className:"content",onClick:this.onClickLink},this.imageContent(),u["default"].createElement("div",{className:"gradient-overlay"}),this.titleContent())),u["default"].createElement("footer",{className:"grid-block"},u["default"].createElement("div",{className:"grid-block small-10"},u["default"].createElement(h["default"],this.state)),u["default"].createElement("div",{className:"grid-block small-14 align-right"},this.likesContent(),this.pagesContent())))}}]),t}(u["default"].Component);t["default"]=m,m.contextTypes={router:u["default"].PropTypes.func},m.propTypes={isBookmarked:u["default"].PropTypes.bool},m.defaultProps={isBookmarked:!1},e.exports=t["default"]},338:function(e,t,n){var r,a,o,i,s,l,u,c,d,f,p,h,m,v,g,y,b,w,k=[].slice,O={}.hasOwnProperty,_=function(e,t){function n(){this.constructor=e}for(var r in t)O.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};o=n(97),v=n(339),f=n(341),p=n(351),a=o.PropTypes,g=o.DOM.span,d=f.use(p),i={PENDING:"pending",LOADING:"loading",LOADED:"loaded",FAILED:"failed",UNSUPPORTED:"unsupported"},y=v(function(){var e;return document?(e=document.createElement("div"),e.innerHTML="<svg />",e.firstChild&&"http://www.w3.org/2000/svg"===e.firstChild.namespaceURI):!1}),u=function(e){return function(){var t,n;t=1<=arguments.length?k.call(arguments,0):[],n=function(){return e.apply(null,t)},setTimeout(n,0)}},h=v(function(){return(("undefined"!=typeof window&&null!==window?window.XMLHttpRequest:void 0)||("undefined"!=typeof window&&null!==window?window.XDomainRequest:void 0))&&y()}),b=function(){var e,t;return t=function(e){return"(?:(?:\\s|\\:)"+e+")"},e=RegExp("(?:("+t("id")+')="([^"]+)")|(?:('+t("href")+"|"+t("role")+"|"+t("arcrole")+')="\\#([^"]+)")|(?:="url\\(\\#([^\\)]+)\\)")',"g"),function(t,n){var r;return r=function(e){return""+e+"___"+n},t.replace(e,function(e,t,n,a,o,i){return n?""+t+'="'+r(n)+'"':o?""+a+'="#'+r(o)+'"':i?'="url(#'+r(i)+')"':void 0})}}(),c=function(e){var t,n,r,a,o;if(n=0,!e)return n;for(r=a=0,o=e.length;o>=0?o>a:a>o;r=o>=0?++a:--a)t=e.charCodeAt(r),n=(n<<5)-n+t,n&=n;return n},r=function(e){function t(e){this.message=e}return _(t,e),t.prototype.name="InlineSVGError",t.prototype.isSupportedBrowser=!0,t.prototype.isConfigurationError=!1,
t.prototype.isUnsupportedBrowserError=!1,t}(Error),l=function(e,t){var n,a,o;n=new r(e);for(a in t)O.call(t,a)&&(o=t[a],n[a]=o);return n},w=function(e){return null==e&&(e="Unsupported Browser"),l(e,{isSupportedBrowser:!1,isUnsupportedBrowserError:!0})},s=function(e){return l(e,{isConfigurationError:!0})},e.exports=m=o.createClass({statics:{Status:i},displayName:"InlineSVG",propTypes:{wrapper:a.func,src:a.string.isRequired,className:a.string,preloader:a.func,onLoad:a.func,onError:a.func,supportTest:a.func,uniquifyIDs:a.bool},getDefaultProps:function(){return{wrapper:g,supportTest:h,uniquifyIDs:!0}},getInitialState:function(){return{status:i.PENDING}},componentDidMount:function(){return this.state.status===i.PENDING?this.props.supportTest()?this.props.src?this.setState({status:i.LOADING},this.load):u(function(e){return function(){return e.fail(s("Missing source"))}}(this))():u(function(e){return function(){return e.fail(w())}}(this))():void 0},fail:function(e){var t;return t=e.isUnsupportedBrowserError?i.UNSUPPORTED:i.FAILED,this.setState({status:t},function(t){return function(){var n;return"function"==typeof(n=t.props).onError?n.onError(e):void 0}}(this))},handleLoad:function(e,t){if(e)return this.fail(e);if(this.isMounted())return this.setState({loadedText:t.text,status:i.LOADED},function(e){return function(){var t;return"function"==typeof(t=e.props).onLoad?t.onLoad():void 0}}(this))},load:function(){var e,t;return(e=this.props.src.match(/data:image\/svg[^,]*?(;base64)?,(.*)/))?(t=e[1]?atob(e[2]):decodeURIComponent(e[2]),this.handleLoad(null,{text:t})):d.get(this.props.src,this.handleLoad)},getClassName:function(){var e;return e="isvg "+this.state.status,this.props.className&&(e+=" "+this.props.className),e},render:function(){return this.props.wrapper({className:this.getClassName(),dangerouslySetInnerHTML:this.state.loadedText?{__html:this.processSVG(this.state.loadedText)}:void 0},this.renderContents())},processSVG:function(e){return this.props.uniquifyIDs?b(e,c(this.props.src)):e},renderContents:function(){switch(this.state.status){case i.UNSUPPORTED:return this.props.children;case i.PENDING:case i.LOADING:if(this.props.preloader)return new this.props.preloader}}})},339:function(e,t,n){function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}var a=n(340);e.exports=a(r),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0})})},340:function(e,t){function n(e,t){function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),a=t[t.length-1];return"function"==typeof r&&r!==a&&Object.keys(a).forEach(function(e){r[e]=a[e]}),r}if(e&&t)return n(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}e.exports=n},341:function(e,t,n){"use strict";function r(e,t){function n(n,r){var i,u,h,m,v,g;for(n=new d(f(e,n)),o=0;o<t.length;o++)u=t[o],u.processRequest&&u.processRequest(n);for(o=0;o<t.length;o++)if(u=t[o],u.createXHR){i=u.createXHR(n);break}i=i||new s,n.xhr=i,h=p(l(function(e){clearTimeout(v),i.onload=i.onerror=i.onabort=i.onreadystatechange=i.ontimeout=i.onprogress=null;var s=a(n,e),l=s||c.fromRequest(n);for(o=0;o<t.length;o++)u=t[o],u.processResponse&&u.processResponse(l);s&&n.onerror&&n.onerror(s),!s&&n.onload&&n.onload(l),r&&r(s,s?void 0:l)})),g="onload"in i&&"onerror"in i,i.onload=function(){h()},i.onerror=h,i.onabort=function(){h()},i.onreadystatechange=function(){if(4===i.readyState){if(n.aborted)return h();if(!g){var e;try{e=i.status}catch(t){}var t=0===e?new Error("Internal XHR Error"):null;return h(t)}}},i.ontimeout=function(){},i.onprogress=function(){},i.open(n.method,n.url),n.timeout&&(v=setTimeout(function(){n.timedOut=!0,h();try{i.abort()}catch(e){}},n.timeout));for(m in n.headers)n.headers.hasOwnProperty(m)&&i.setRequestHeader(m,n.headers[m]);return i.send(n.body),n}e=e||{},t=t||[];var i,h=["get","post","put","head","patch","delete"],m=function(e){return function(t,r){return t=new d(t),t.method=e,n(t,r)}};for(o=0;o<h.length;o++)i=h[o],n[i]=m(i);return n.plugins=function(){return t},n.defaults=function(n){return n?r(f(e,n),t):e},n.use=function(){var n=Array.prototype.slice.call(arguments,0);return r(e,t.concat(n))},n.bare=function(){return r()},n.Request=d,n.Response=c,n.RequestError=u,n}function a(e,t){if(e.aborted)return h("Request aborted",e,{name:"Abort"});if(e.timedOut)return h("Request timeout",e,{name:"Timeout"});var n,r=e.xhr,a=Math.floor(r.status/100);switch(a){case 0:case 2:if(!t)return;return h(t.message,e);case 4:if(404===r.status&&!e.errorOn404)return;n="Client";break;case 5:n="Server";break;default:n="HTTP"}var o=n+" Error: The server returned a status of "+r.status+' for the request "'+e.method.toUpperCase()+" "+e.url+'"';return h(o,e)}var o,i=n(342),s=n(343),l=n(344),u=n(345),c=n(346),d=n(347),f=n(349),p=n(350),h=u.create;e.exports=r({},[i])},342:function(e,t){"use strict";e.exports={processRequest:function(e){e.url=e.url.replace(/[^%]+/g,function(e){return encodeURI(e)})}}},343:function(e,t){e.exports=window.XMLHttpRequest},344:function(e,t){"use strict";e.exports=function(e){return function(){var t=Array.prototype.slice.call(arguments,0),n=function(){return e.apply(null,t)};setTimeout(n,0)}}},345:function(e,t,n){"use strict";function r(e,t){var n=new Error(e);n.name="RequestError",this.name=n.name,this.message=n.message,n.stack&&(this.stack=n.stack),this.toString=function(){return this.message};for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])}var a=n(346),o=n(348),i=n(349);r.prototype=i(Error.prototype),r.prototype.constructor=r,r.create=function(e,t,n){var i=new r(e,n);return a.call(i,o(t)),i},e.exports=r},346:function(e,t,n){"use strict";function r(e){this.request=e.request,this.xhr=e.xhr,this.headers=e.headers||{},this.status=e.status||0,this.text=e.text,this.body=e.body,this.contentType=e.contentType,this.isHttpError=e.status>=400}var a=n(347),o=n(348);r.prototype.header=a.prototype.header,r.fromRequest=function(e){return new r(o(e))},e.exports=r},347:function(e,t){"use strict";function n(e){var t="string"==typeof e?{url:e}:e||{};this.method=t.method?t.method.toUpperCase():"GET",this.url=t.url,this.headers=t.headers||{},this.body=t.body,this.timeout=t.timeout||0,this.errorOn404=null!=t.errorOn404?t.errorOn404:!0,this.onload=t.onload,this.onerror=t.onerror}n.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this)},n.prototype.header=function(e,t){var n;for(n in this.headers)if(this.headers.hasOwnProperty(n)&&e.toLowerCase()===n.toLowerCase()){if(1===arguments.length)return this.headers[n];delete this.headers[n];break}return null!=t?(this.headers[e]=t,t):void 0},e.exports=n},348:function(e,t,n){"use strict";var r=n(349);e.exports=function(e){var t=e.xhr,n={request:e,xhr:t};try{var a,o,i,s={};if(t.getAllResponseHeaders)for(a=t.getAllResponseHeaders().split("\n"),o=0;o<a.length;o++)(i=a[o].match(/\s*([^\s]+):\s+([^\s]+)/))&&(s[i[1]]=i[2]);n=r(n,{status:t.status,contentType:t.contentType||t.getResponseHeader&&t.getResponseHeader("Content-Type"),headers:s,text:t.responseText,body:t.response||t.responseText})}catch(l){}return n}},349:function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}e.exports=n},350:function(e,t){"use strict";e.exports=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments)),t}}},351:function(e,t,n){"use strict";var r=n(352),a=n(350),o=!1,i=a(function(){return"undefined"!=typeof window&&null!==window&&window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest});e.exports={createXHR:function(e){var t,n,a;if("undefined"!=typeof window&&null!==window&&(t=r(e.url),n=r(window.location.href),t.host&&(t.protocol!==n.protocol||t.host!==n.host||t.port!==n.port))){if(!o&&e.headers)for(a in e.headers)if(e.headers.hasOwnProperty(a)){o=!0,window&&window.console&&window.console.warn&&window.console.warn("Request headers are ignored in old IE when using the oldiexdomain plugin.");break}if(window.XDomainRequest&&!i()){var s=new window.XDomainRequest;return s.setRequestHeader=function(){},s}}}}},352:function(e,t){(function(){var t,n,r,a,o={}.hasOwnProperty;n=/^(?:(?:([^:\/?\#]+:)\/+|(\/\/))(?:([a-z0-9-\._~%]+)(?::([a-z0-9-\._~%]+))?@)?(([a-z0-9-\._~%!$&'()*+,;=]+)(?::([0-9]+))?)?)?([^?\#]*?)(\?[^\#]*)?(\#.*)?$/,a=function(e,t){return a.URL.parse(e,t)},a.URL=t=function(){function e(e){var t,n,a;for(t in r)o.call(r,t)&&(n=r[t],this[t]=null!=(a=e[t])?a:n);this.host||(this.host=this.hostname&&this.port?""+this.hostname+":"+this.port:this.hostname?this.hostname:""),this.origin||(this.origin=this.protocol?""+this.protocol+"//"+this.host:""),this.isAbsolutePathRelative=!this.host&&"/"===this.pathname.charAt(0),this.isPathRelative=!this.host&&"/"!==this.pathname.charAt(0),this.isRelative=this.isSchemeRelative||this.isAbsolutePathRelative||this.isPathRelative,this.isAbsolute=!this.isRelative}return e.parse=function(e){var t,r,o;return t=e.toString().match(n),r=t[8]||"",o=t[1],new a.URL({protocol:o,username:t[3],password:t[4],hostname:t[6],port:t[7],pathname:o&&"/"!==r.charAt(0)?"/"+r:r,search:t[9],hash:t[10],isSchemeRelative:null!=t[2]})},e}(),r={protocol:"",username:"",password:"",host:"",hostname:"",port:"",pathname:"",search:"",hash:"",origin:"",isSchemeRelative:!1},e.exports=a}).call(this)},353:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(21),d=n(315),f=r(d),p=n(338),h=r(p),m=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={storyId:e.storyId,isBookmarked:e.isBookmarked,bookmarkCount:e.bookmarkCount,isBig:e.isBig,buttonSize:{width:38,height:32},bookmarking:!1},this.toggleBookmarkStory=this.toggleBookmarkStory.bind(this)}return o(t,e),i(t,[{key:"onLoad",value:function(){if(this.state.isBig){var e=u["default"].findDOMNode(this.refs["bookmark-icon"]),t=e.children[0];t.setAttribute("width",this.state.buttonSize.width),t.setAttribute("height",this.state.buttonSize.height)}}},{key:"toggleBookmarkStory",value:function(e){var t=this;if(!this.state.bookmarking){var n=this.state.isBookmarked?"unbookmarkStory":"bookmarkStory",r=this.state.isBookmarked?-1:1;this.setState({bookmarking:!0}),c.Parse.Cloud.run(n,{id:this.state.storyId},{success:function(e){t.setState({isBookmarked:!t.state.isBookmarked,bookmarkCount:t.state.bookmarkCount+r,bookmarking:!1})},error:function(e){t.setState({bookmarking:!1})}})}}},{key:"render",value:function(){var e=f["default"]({bookmarks:!0,highlighted:this.state.isBookmarked});return u["default"].createElement("div",{className:e,onClick:this.toggleBookmarkStory},u["default"].createElement(h["default"],{src:n(354),ref:"bookmark-icon",onLoad:this.onLoad.bind(this)}),this.state.bookmarkCount)}}]),t}(u["default"].Component);t["default"]=m,m.propTypes={isBookmarked:u["default"].PropTypes.bool,isBig:u["default"].PropTypes.bool},m.defaultProps={isBookmarked:!1,isBig:!1},e.exports=t["default"]},354:function(e,t,n){e.exports=n.p+"25e7e7276af32178228d477b597448d1.svg"},355:function(e,t,n){e.exports=n.p+"9ecc5e546ac172197010076d9691a935.jpg"},356:function(e,t,n){e.exports=n.p+"8a6c9751e07dfbc123fe4c6eb1e75575.svg"},357:function(e,t,n){e.exports=n.p+"5fe9fbbed4c2cf548c03c479d8e33aa7.svg"},374:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){a=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},c=n(97),d=r(c),f=n(21),p=n(295),h=r(p),m=n(335),v=n(375),g=r(v),y=n(378),b=r(y),w=n(432),k=r(w),O=n(433),_=r(O),P=n(439),E=r(P),C=n(441),j=r(C),S=h["default"].Component(d["default"]),T=function(e){function t(e){a(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.data={stories:e.stories,pages:e.pages,likes:e.likes,user:e.user},this.handleClickWriteAssist=this.handleClickWriteAssist.bind(this),this.state={storyId:e.params.id,writeAssistOn:!1}}return o(t,e),l(t,[{key:"observe",value:function(e){var t=e.params.id,n=new f.Parse.Object("Story");n.id=e.params.id;var r=new f.Parse.Query("Story").equalTo("objectId",t),a=new f.Parse.Query("Page").equalTo("story",n).equalTo("statusRaw",1).ascending("createdAt").include("creator"),o=new f.Parse.Query("Aid").matchesQuery("story",r),i=new f.Parse.Query("Aid").matchesQuery("page",a),s=f.Parse.Query.or(o,i);return{stories:r.include("creator").include("approver"),pages:a,likes:new f.Parse.Query("Like").equalTo("story",n).equalTo("creator",f.Parse.User.current()).equalTo("typeRaw",0).include("story").include("page"),aids:s,user:h["default"].currentUser}}},{key:"refresh",value:function(){this.refreshQueries(["stories","pages","aids"])}},{key:"handleClickWriteAssist",value:function(e){this.setState({writeAssistOn:!this.state.writeAssistOn})}},{key:"handleShowCommentBox",value:function(e){var t=this;this.refs.CommentBox.hideCommentBox(),this.data.pages.forEach(function(n){var r="CommentBox_"+n.id.objectId;e!=r&&t.refs[r].hideCommentBox()})}},{key:"renderStoryHeader",value:function(){return d["default"].createElement("div",{className:"story-container grid-block"},this.data.stories.map(function(e){this.data.storyApprover=e.approver;var t=this.data.likes.filter(function(t){return void 0==t.page&&t.story.id.objectId===e.id.objectId}),n="CommentBox",r=this.data.aids&&this.data.aids.filter(function(t){return t.story&&t.story.objectId===e.objectId});return this.data.storyHeaderPage=d["default"].createElement(b["default"],s({},e,{key:e.id.objectId,ref:n,isLiked:t.length>0,onShowCommentsBox:this.handleShowCommentBox.bind(this,n),writeAssistOn:this.state.writeAssistOn,aids:r})),d["default"].createElement(g["default"],s({key:"story-header"},e))},this))}},{key:"renderStoryHeaderPage",value:function(){return this.data.storyHeaderPage}},{key:"renderPagesContent",value:function(){var e=this;return d["default"].createElement("div",null,this.data.pages.map(function(t){var n="CommentBox_"+t.id.objectId,r=e.data.likes&&e.data.likes.filter(function(e){return void 0!==e.page&&e.page.id.objectId===t.id.objectId}),a=e.data.aids&&e.data.aids.filter(function(e){return e.page&&e.page.objectId===t.objectId});return d["default"].createElement(b["default"],s({},t,{key:t.id.objectId,ref:n,onShowCommentsBox:e.handleShowCommentBox.bind(e,n),isLiked:r.length>0,writeAssistOn:e.state.writeAssistOn,likes:e.data.likes,aids:a}))}))}},{key:"renderSubmissions",value:function(e){var t=void 0,n=void 0;return this.data.storyApprover&&this.data.storyApprover.id.objectId===this.data.user.id.objectId?(t="",n=d["default"].createElement(E["default"],s({},this.state,{likes:this.data.likes,refresh:this.refresh.bind(this),refPageId:e.id.objectId}))):(t=d["default"].createElement(k["default"],s({},this.state,{likes:this.data.likes,refPageId:e.id.objectId})),n=d["default"].createElement("div",{className:"grid-container"},d["default"].createElement(_["default"],s({},this.state,{refPageId:e.id.objectId})))),[t,n]}},{key:"render",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(this.pendingQueries().length)e=d["default"].createElement("div",{className:"loading grid-frame"},d["default"].createElement("div",{className:"spinner"},d["default"].createElement("div",{className:"bounce1"}),d["default"].createElement("div",{className:"bounce2"}),d["default"].createElement("div",{className:"bounce3"})));else if(this.data.stories.length){e=d["default"].createElement("div",{className:"small-24 medium-24 large-24 grid-block"},this.renderStoryHeader());var a=this.data.stories[0];if(this.data.pages.length){var o=this.data.pages.length;a=this.data.pages[o-1]}this.data.pages&&this.data.likes&&(t=this.renderPagesContent());var s=this.renderSubmissions(a),l=i(s,2);n=l[0],r=l[1]}else e=d["default"].createElement("div",{className:"grid-frame"},"No Stories");return d["default"].createElement("section",{className:"story vertical"},d["default"].createElement(j["default"],{isOn:this.state.writeAssistOn,onClick:this.handleClickWriteAssist}),d["default"].createElement("div",{className:"aid-category grid-container"},d["default"].createElement("div",{className:"grid-block"},d["default"].createElement("div",{className:"grid-block"},d["default"].createElement("div",{className:"grammar tile"}),d["default"].createElement("div",{className:"grid-block v-align"},"GRAMMAR")),d["default"].createElement("div",{className:"grid-block"},d["default"].createElement("div",{className:"dva tile"}),d["default"].createElement("div",{className:"grid-block v-align"},"DICTION")),d["default"].createElement("div",{className:"grid-block"},d["default"].createElement("div",{className:"slength tile"}),d["default"].createElement("div",{className:"grid-block v-align"},"LENGTH")),d["default"].createElement("div",{className:"grid-block"},d["default"].createElement("div",{className:"passive tile"}),d["default"].createElement("div",{className:"grid-block v-align"},"STYLE")),d["default"].createElement("div",{className:"grid-block"},d["default"].createElement("div",{className:"consistency tile"}),d["default"].createElement("div",{className:"grid-block v-align"},"CONSISTENCY")))),e,this.renderStoryHeaderPage(),t,n,r)}}]),t}(S);t["default"]=m.requireAuth(T);var x=T;t.undecorated=x,T.defaultProps={stories:[],pages:[],likes:[]}},375:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},u=n(97),c=r(u),d=n(21),f=n(295),p=r(f),h=n(353),m=r(h),v=p["default"].Component(c["default"]),g=function(e){function t(e){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={storyId:e.objectId,title:e.title,image:e.image,bookmarkCount:e.bookmarkCount,isBookmarked:!1,totalLikeCount:e.totalLikeCount,pageCount:e.pageCount}}return o(t,e),s(t,[{key:"observe",value:function(e){return{bookmarks:new d.Parse.Query("Bookmark").equalTo("story",e).equalTo("creator",d.Parse.User.current()).include("story")}}},{key:"imageUrl",value:function(){return this.state.image?this.state.image._url:void 0}},{key:"render",value:function(){var e=void 0;if(!this.pendingQueries().length){var t=this.data.bookmarks.length>0&&0==this.data.bookmarks[0].typeRaw;e=c["default"].createElement(m["default"],i({},this.state,{isBig:!0,isBookmarked:t}))}return c["default"].createElement("div",{className:"grid-container"},c["default"].createElement("div",{className:"vertical grid-block"},c["default"].createElement("div",{className:"story-header"},c["default"].createElement("img",{src:this.imageUrl()}),c["default"].createElement("div",{className:"gradient"}),c["default"].createElement("h1",null,this.state.title)),c["default"].createElement("div",{className:"story-meta grid-block hidden"},c["default"].createElement("div",{className:"bookmark-count grid-block align-center"},e),c["default"].createElement("div",{className:"total-like-count grid-block align-center"},c["default"].createElement("img",{src:n(376)}),this.state.totalLikeCount),c["default"].createElement("div",{className:"page-count grid-block align-center"},c["default"].createElement("img",{src:n(377)}),this.state.pageCount))))}}]),t}(v);t["default"]=g,e.exports=t["default"]},376:function(e,t,n){e.exports=n.p+"26b8d9513a1e776f240721d0cca014cc.png"},377:function(e,t,n){e.exports=n.p+"181c343558a086921099076d06db4a40.png"},378:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},u=n(97),c=r(u),d=(n(358),n(379)),f=r(d),p=n(389),h=r(p),m=n(406),v=r(m),g=n(430),y=r(g),b=function(e){function t(e){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={className:this.props.className,viewType:this.props.viewType,commentBoxOpen:!1},this.onClickComment=this.onClickComment.bind(this),this.incrementCommentCount=this.incrementCommentCount.bind(this)}return o(t,e),s(t,[{key:"handleOnToggleViewType",value:function(){this.setState({viewType:"PAGE"==this.state.viewType?"SLIDER":"PAGE",commentBoxOpen:"PAGE"==this.state.viewType?!1:this.state.commentBoxOpen})}},{key:"onClickComment",value:function(e){this.props.onShowCommentsBox(),this.setState({commentBoxOpen:!this.state.commentBoxOpen})}},{key:"hideCommentBox",value:function(){this.setState({commentBoxOpen:!1}),this.refs.page.deselectComment()}},{key:"incrementCommentCount",value:function(){this.refs.page.incrementCommentCount()}},{key:"renderPage",value:function(){var e=void 0;return"Story"!==this.props.className&&this.props.morePageCount>0&&(e=c["default"].createElement("div",{className:"toggle-view-button",onClick:this.handleOnToggleViewType.bind(this)},this.props.morePageCount,c["default"].createElement("br",null),"More",c["default"].createElement("br",null),c["default"].createElement("i",{className:"fa fa-ellipsis-h"}))),c["default"].createElement("div",{className:"page-wrapper grid-container"},c["default"].createElement("div",{className:"center"},c["default"].createElement(h["default"],i({},this.props,{ref:"page",onClickComment:this.onClickComment})),e,c["default"].createElement(f["default"],{onlyChild:!0,appear:!0,enter:{opacity:1},leave:{opacity:0}},this.state.commentBoxOpen&&c["default"].createElement("div",{className:"comment-box-wrapper"},c["default"].createElement(y["default"],{incrementCommentCount:this.incrementCommentCount,className:this.props.className,objectId:this.props.id.objectId})))))}},{key:"renderSlider",value:function(){return c["default"].createElement(v["default"],i({},this.props,{onClose:this.handleOnToggleViewType.bind(this)}))}},{key:"render",value:function(){var e={PAGE:this.renderPage(),SLIDER:this.renderSlider()}[this.state.viewType];return c["default"].createElement("div",{className:"page-row-outer"},e)}}]),t}(c["default"].Component);t["default"]=b,b.propTypes={viewType:c["default"].PropTypes.oneOf(["PAGE","SLIDER"]),onShowCommentsBox:c["default"].PropTypes.func.isRequired},b.defaultProps={viewType:"PAGE"},e.exports=t["default"]},389:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(315),d=r(c),f=n(390),p=(r(f),n(398)),h=r(p),m=n(399),v=r(m),g=n(318),y=r(g),b=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={content:this.props.content,creator:this.props.creator,image:this.props.image,refPageId:this.props.refPageId,commentCount:this.props.commentCount,isCommentSelected:!1},this.contentText=this.contentText.bind(this),this.handleClickComment=this.handleClickComment.bind(this),this.props.aids&&this.props.aids.length&&this.props.content&&(this.hint=new v["default"](this.props.content,this.props.aids[0].content.tags,!1))}return o(t,e),i(t,[{key:"componentDidUpdate",value:function(e,t){this.hint&&(this.props.writeAssistOn?this.hint.showHint():this.hint.hideHint())}},{key:"componentWillUnmount",value:function(){this.hint&&this.hint.destroy()}},{key:"smallAvatarUrl",value:function(){return this.state.creator&&this.state.creator.smallAvatar?u["default"].createElement("img",{src:this.state.creator.smallAvatar._url}):u["default"].createElement("img",{src:n(319)})}},{key:"contentText",value:function(){return this.props.aids&&this.props.aids.length&&this.hint?this.hint.htmlContent:this.props.content}},{key:"imageContent",value:function(){return this.state.image&&this.state.refPageId?u["default"].createElement("div",null,u["default"].createElement("img",{src:this.state.image._url})):void 0}},{key:"handleClickComment",value:function(){this.props.onClickComment(this.props.objectId),this.setState({isCommentSelected:!this.state.isCommentSelected})}},{key:"deselectComment",value:function(){this.setState({isCommentSelected:!1})}},{key:"incrementCommentCount",value:function(){this.setState({commentCount:this.state.commentCount+1})}},{key:"render",value:function(){var e=d["default"]({button:!0,"comment-button":!0,active:this.state.isCommentSelected}),t=void 0;this.props.onClickComment&&(t=u["default"].createElement("div",{className:e,onClick:this.handleClickComment},u["default"].createElement("i",{className:"fa fa-comment"}),u["default"].createElement("span",{className:"comment-count"},this.state.commentCount)));var n=this.contentText(),r=this.state.creator;return u["default"].createElement("div",{className:"page small-24 large-24 grid-block"},u["default"].createElement("div",{className:"line"}),u["default"].createElement("div",{className:"avatar small-3"},u["default"].createElement("img",{src:y["default"].getAvatar(r),title:y["default"].getDisplayName(r)})),t,u["default"].createElement(h["default"],this.props),u["default"].createElement("div",{className:"content small-18"},u["default"].createElement("p",{dangerouslySetInnerHTML:{__html:n}}),this.imageContent()))}}]),t}(u["default"].Component);t["default"]=b,b.defaultProps={commentCount:0},b.propTypes={onClickComment:u["default"].PropTypes.func},e.exports=t["default"]},390:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(315),d=(r(c),
n(391)),f=r(d),p=n(396),h=r(p),m=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this),this.state={showHint:!1}}return o(t,e),i(t,[{key:"handleClick",value:function(e){this.setState({showHint:!this.state.showHint})}},{key:"render",value:function(){var e=void 0,t={attachment:"top left",targetAttachment:"bottom right",constraints:[{to:"window",attachment:"together"}]},n=this.props.writeAssistOn?this.props.tag.report:"";return this.state.showHint?e=u["default"].createElement(f["default"],{tethered:u["default"].createElement(h["default"],{category:this.props.tag.categoryDisplayName,hint:this.props.tag.hint,report:this.props.tag.report,onClose:this.handleClick}),tetherOptions:t},u["default"].createElement("span",{className:n,onClick:this.handleClick},this.props.children)):u["default"].createElement("span",{className:n,onClick:this.handleClick},this.props.children)}}]),t}(u["default"].Component);t["default"]=m,e.exports=t["default"]},391:function(e,t,n){"use strict";var r=n(392),a=n(97),o=n(394),i=a.createClass({displayName:"TetherTarget",propTypes:{tethered:a.PropTypes.node.isRequired,tetherOptions:a.PropTypes.object.isRequired},getInitialState:function(){return{tooltipVisible:!1}},componentDidMount:function(){var e=r.merge({target:this.getDOMNode()},this.props.tetherOptions);this.tethered=new o(this.props.tethered,e)},componentWillUnmount:function(){this.tethered.destroy()},componentDidUpdate:function(){this.tethered.update()},render:function(){var e=r.omit(this.props,["tethered","tetherOptions"]);return a.createElement("span",e,this.props.children)}});e.exports=i},394:function(e,t,n){"use strict";function r(e,t){this.reactComponent=e,this.domNode=document.createElement("div"),this.domNode.style.position="absolute",document.body.appendChild(this.domNode),this.tether=new i(a.merge({element:this.domNode},t)),this.update()}var a=n(392),o=n(97),i=n(395);r.prototype.update=function(){var e=this;o.render(this.reactComponent,this.domNode,function(){return e.tether.position()})},r.prototype.destroy=function(){o.unmountComponentAtNode(this.domNode),this.domNode.parentNode.removeChild(this.domNode),this.tether.destroy()},e.exports=r},396:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(315),d=r(c),f=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"hint-dialog"},u["default"].createElement("div",{className:"hint-content"},u["default"].createElement("div",{className:"hint-header"},u["default"].createElement("a",{href:"#close",className:"btn-close","aria-hidden":"true",onClick:this.props.onClose},u["default"].createElement("img",{src:n(397)}))),u["default"].createElement("div",{className:d["default"]("hint-body",this.props.report)},u["default"].createElement("p",{className:"hint-title"},this.props.category),u["default"].createElement("p",null,this.props.hint))))}}]),t}(u["default"].Component);t["default"]=f,e.exports=t["default"]},397:function(e,t,n){e.exports=n.p+"d7117299eefb9cfea7cbc54dad34ecd5.png"},398:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(21),d=n(315),f=r(d),p=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={objectId:e.objectId,isLiked:e.isLiked,likeCount:e.likeCount,liking:!1},this.toggleLike=this.toggleLike.bind(this)}return o(t,e),i(t,[{key:"toggleLike",value:function(){var e=this;if(!this.state.liking){var t=this.state.isLiked?"unlikePage":"likePage",n=this.state.isLiked?-1:1,r="Story"===this.props.className?"story":"page";this.setState({liking:!0}),c.Parse.Cloud.run(t,{id:this.state.objectId,storyOrPage:r},{success:function(t){e.setState({isLiked:!e.state.isLiked,likeCount:e.state.likeCount+n,liking:!1})},error:function(t){e.setState({liking:!1})}})}}},{key:"render",value:function(){var e=f["default"]({button:!0,"like-button":!0,highlighted:this.state.isLiked});return u["default"].createElement("div",{className:e,onClick:this.toggleLike},u["default"].createElement("i",{className:"fa fa-heart"}),u["default"].createElement("span",{className:"like-count"},this.state.likeCount))}}]),t}(u["default"].Component);t["default"]=p,p.propTypes={isLiked:u["default"].PropTypes.bool,likeCount:u["default"].PropTypes.number},p.defaultProps={isLiked:!1,likeCount:0},e.exports=t["default"]},399:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];this.content=e,this.editable=n,this.tags=t,this.drops=[],t&&this.setTags(t)}var o=n(400),i=r(o),s=n(97),l=r(s),u=n(402),c=r(u),d=n(324),f=r(d),p=n(396),h=r(p);a.prototype.setTags=function(e){var t=this,n=e.map(function(e){return{pos:e.endPos,tag:"</span>",type:"end"}}),r=e.map(function(e){return{pos:e.startPos,endPos:e.endPos,type:"start",tag:"<span contenteditable='"+t.editable+"' class='aid' data-category='"+e.categoryDisplayName+"' data-report='"+e.report+"' data-hint='"+(e.hint&&c["default"](e.hint).escapeHTML().s.replace(/,/g,", "))+"'>"}}),a=[n,r].reduce(function(e,t){return e.concat(t)},[]).sort(function(e,t){return e.pos>t.pos?1:e.pos===t.pos?"start"===e.type&&"end"===t.type?-1:"start"===e.type&&"start"===t.type?e.endPos<t.endPos?1:-1:1:-1});this.htmlContent=a.reduceRight(function(e,t,n){var r=void 0,a=void 0;return"start"===t.type?(a=e.slice(t.pos),r=e.slice(0,t.pos)):(a=e.slice(t.pos+1),r=e.slice(0,t.pos+1)),r+t.tag+a},this.content)},a.prototype.setDrops=function(){var e=this;f["default"]("span.aid").each(function(t,n){var r=f["default"](n);r.addClass(r.data("report"));var a=new i["default"]({target:n,position:"bottom right"});a.setElement(l["default"].createElement(h["default"],{category:r.data("category"),hint:r.data("hint")&&c["default"](r.data("hint")).unescapeHTML().s,report:r.data("report"),onClose:a.close.bind(a)})),e.drops.push(a)})},a.prototype.showHint=function(){if(this.drops.length)for(var e=0;e<this.drops.length;e++)this.drops[e].open();else this.setDrops()},a.prototype.destroy=function(){if(this.drops)for(var e=0;e<this.drops.length;e++)this.drops[e].destroy();this.drops=[]},a.prototype.hideHint=function(){f["default"]("span.aid").each(function(e,t){var n=f["default"](t);n.removeClass(n.data("report"))}),this.destroy()},e.exports=a},400:function(e,t,n){"use strict";function r(e){this.domNode=document.createElement("div"),this.domNode.style.position="absolute",document.body.appendChild(this.domNode),this.drop=new i(a.merge({content:this.domNode},e))}var a=n(392),o=n(97),i=n(401);r.prototype.setElement=function(e){this.reactComponent=e,this.update()},r.prototype.update=function(){var e=this;o.render(this.reactComponent,this.domNode,function(){return e.drop.position()})},r.prototype.update=function(){var e=this;o.render(this.reactComponent,this.domNode,function(){return e.drop.position()})},r.prototype.close=function(){this.drop.close()},r.prototype.destroy=function(){o.unmountComponentAtNode(this.domNode),this.domNode.parentNode.removeChild(this.domNode),this.drop.destroy()},e.exports=r},406:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},u=n(97),c=r(u),d=n(21),f=n(295),p=r(f),h=n(315),m=r(h),v=n(407),g=r(v),y=n(389),b=r(y),w=p["default"].Component(c["default"]),k=n(358),O=k.Motion,_=k.spring,P=k.presets,E=function(e){function t(e){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={savedPages:e.savedPages},this.data={pages:e.pages,likes:e.likes}}return o(t,e),s(t,[{key:"observe",value:function(e){if(void 0==e.refPageId||""===e.refPageId)return{};var t=new d.Parse.Query("Page").equalTo("refPageId",e.refPageId).ascending("createdAt").include("creator");return{pages:t,aids:new d.Parse.Query("Aid").matchesQuery("page",t)}}},{key:"render",value:function(){var e=this;return c["default"].createElement(O,{defaultStyle:{height:0},style:{height:_(100,P.stiff)}},function(t){return c["default"].createElement("div",{className:"page-slider-wrapper"},c["default"].createElement("div",{className:"content-wrapper",style:{height:4.2*t.height+"px"}},c["default"].createElement(g["default"],{settings:{className:"page-slider-slick"}},e.data.pages.map(function(t,n){var r=m["default"]({approved:1==t.statusRaw}),a=e.data.likes&&e.data.likes.filter(function(e){return void 0!==e.page&&e.page.id.objectId===t.id.objectId});return c["default"].createElement("div",{key:t.id.objectId,className:r},c["default"].createElement(b["default"],i({},t,{key:t.id.objectId,isLiked:a.length>0,writeAssistOn:e.props.writeAssistOn})))},e))),c["default"].createElement("div",{className:"close-slider-button button",onClick:e.props.onClose},"Close"))})}}]),t}(w);t["default"]=E,E.propTypes={pages:c["default"].PropTypes.array.isRequired,likes:c["default"].PropTypes.array.isRequired,onClose:c["default"].PropTypes.func.isRequired},E.defaultProps={pages:[],likes:[]},e.exports=t["default"]},407:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(408),d=r(c),f=n(253),p=r(f),h=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n={infinite:!1,speed:500,slidesToShow:3,slidesToScroll:1,arrows:!0};this.state={settings:p["default"]({},n,e.settings)}}return o(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({settings:p["default"]({},this.state.settings,e.settings)})}},{key:"render",value:function(){return u["default"].createElement("div",{className:"slick-slider-wrapper"},u["default"].createElement(d["default"],this.state.settings,this.props.children))}}]),t}(u["default"].Component);t["default"]=h,h.propTypes={settings:u["default"].PropTypes.object},h.defaultProps={settings:{}},e.exports=t["default"]},430:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},u=n(97),c=r(u),d=n(21),f=n(295),p=r(f),h=n(315),m=r(h),v=n(431),g=r(v),y=p["default"].Component(c["default"]),b=function(e){function t(e){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=void 0,r=void 0;this.isStory(e)?(n=new d.Parse.Object("Story"),n.id=e.objectId):(r=new d.Parse.Object("Page"),r.id=e.objectId),this.state={story:n,page:r,submitting:!1},this.data={comments:this.props.comments}}return o(t,e),s(t,[{key:"observe",value:function(e){var t=new d.Parse.Query("Comment").include("creator").ascending("createdAt");return t=this.isStory(e)?t.equalTo("story",this.state.story):t.equalTo("page",this.state.page),{comments:t}}},{key:"isStory",value:function(e){return"Story"===e.className?!0:!1}},{key:"componentDidUpdate",value:function(){var e=c["default"].findDOMNode(this.refs["message-area"]);e.scrollTop=e.scrollHeight}},{key:"handleAddComment",value:function(e){var t=this;e.preventDefault();var n=c["default"].findDOMNode(this.refs.message).value;if(!this.state.submitting&&""!==n){this.setState({submitting:!0});var r=n.trim();r&&p["default"].Mutation.Create("Comment",{content:r,story:this.state.story,page:this.state.page,creator:d.Parse.User.current()}).dispatch().then(function(){c["default"].findDOMNode(t.refs.message).value="",t.refreshQueries(),t.props.incrementCommentCount(),t.setState({submitting:!1})})}}},{key:"render",value:function(){return c["default"].createElement("div",{className:"comment-box"},c["default"].createElement("p",{className:"header"},"Discussion"),c["default"].createElement("div",{className:"message-area",ref:"message-area"},this.data.comments.map(function(e){return c["default"].createElement(g["default"],i({},e,{key:e.id.objectId}))})),c["default"].createElement("form",{onSubmit:this.handleAddComment.bind(this)},c["default"].createElement("input",{type:"text",className:m["default"]({disabled:this.state.submitting}),ref:"message",placeholder:"Say something..."}),c["default"].createElement("div",{className:"button-spinner-wrapper"},c["default"].createElement("div",{className:m["default"]("button-spinner",{hide:!this.state.submitting})}))))}}]),t}(y);t["default"]=b,b.propTypes={objectId:c["default"].PropTypes.string.isRequired},b.defaultProps={comments:[],objectId:""},e.exports=t["default"]},431:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(318),d=r(c),f=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.creator||{};return u["default"].createElement("div",{className:"comment"},u["default"].createElement("img",{src:d["default"].getAvatar(e)}),u["default"].createElement("div",{className:"text"},u["default"].createElement("p",{className:"username"},d["default"].getDisplayName(e)),u["default"].createElement("p",{className:"content"},this.props.content)))}}]),t}(u["default"].Component);t["default"]=f,f.propTypes={content:u["default"].PropTypes.string,creator:u["default"].PropTypes.object},f.defaultProps={content:"",creator:{}},e.exports=t["default"]},432:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},u=n(97),c=r(u),d=n(21),f=n(295),p=r(f),h=n(389),m=r(h),v=n(407),g=r(v),y=p["default"].Component(c["default"]),b=function(e){function t(e){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isShowing:e.isShowing,isSmall:this.props.isSmall},this.data={pages:e.pages,likes:e.likes}}return o(t,e),s(t,[{key:"observe",value:function(e){var t=new d.Parse.Object("Story");t.id=e.storyId;var n=e.refPageId,r=new d.Parse.Query("Page").equalTo("story",t).equalTo("refPageId",n).equalTo("statusRaw",0).ascending("createdAt").include("creator");return{pages:r,aids:new d.Parse.Query("Aid").matchesQuery("page",r),user:p["default"].currentUser}}},{key:"toggleShowHide",value:function(){this.state.isShowing=!this.state.isShowing,this.setState({isSmall:!this.state.isShowing})}},{key:"renderPending",value:function(){var e=this;return this.state.isShowing&&this.data.pages.length?c["default"].createElement("div",{className:"pending-pages small-up-3 grid-block"},c["default"].createElement(g["default"],{settings:{className:"submissions-slider"}},this.data.pages.map(function(t,n){var r=e.data.likes&&e.data.likes.filter(function(e){return void 0!==e.page&&e.page.id.objectId===t.id.objectId}),a=e.data.aids&&e.data.aids.filter(function(e){return e.page.objectId===t.objectId});return c["default"].createElement("div",{key:t.id.objectId},c["default"].createElement(m["default"],i({},t,{isSmall:!1,isLiked:r.length>0,aids:a,writeAssistOn:e.props.writeAssistOn})))},this))):null}},{key:"render",value:function(){return c["default"].createElement("div",{className:"submissions"},c["default"].createElement("div",{className:"show-hide grid-container"},c["default"].createElement("div",{className:"button hollow",onClick:this.toggleShowHide.bind(this)},this.state.isShowing?"Hide submissions":"See current submissions")),this.renderPending())}}]),t}(y);t["default"]=b,b.propTypes={isShowing:c["default"].PropTypes.bool.isRequired,isSmall:c["default"].PropTypes.bool.isRequired,pages:c["default"].PropTypes.array.isRequired,likes:c["default"].PropTypes.array.isRequired},b.defaultProps={isShowing:!1,isSmall:!0,pages:[],likes:[]},e.exports=t["default"]},433:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(21),d=n(295),f=r(d),p=n(327),h=r(p),m=n(434),v=r(m),g=n(435),y=r(g),b=n(318),w=r(b),k=n(315),O=r(k),_=f["default"].Component(u["default"]),P=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=new c.Parse.Object("Story");n.id=e.storyId,this.state={storyId:e.storyId,story:n,refPageId:e.refPageId,creator:e.creator,userInput:null,showHint:!1,aids:null,saving:!1,submitting:!1,assisting:!1},this.validate=this.validate.bind(this),this.handleChange=this.handleChange.bind(this)}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this._notificationSystem=this.refs.notificationSystem}},{key:"componentDidUpdate",value:function(){null===this.state.userInput&&this.data.drafts.length&&this.setState({userInput:this.data.drafts[0].content})}},{key:"observe",value:function(e){var t=new c.Parse.Object("Story");return t.id=e.storyId,{user:f["default"].currentUser,drafts:new c.Parse.Query("Page").equalTo("story",t).equalTo("statusRaw",v["default"].DRAFTED).equalTo("creator",c.Parse.User.current()).ascending("createdAt").include("creator")}}},{key:"handleCancel",value:function(e){e.preventDefault(),this.setState({userInput:""}),this._deleteFromParse()}},{key:"handleSaveDraft",value:function(e){var t=this._gatherData(e);t&&this.validate()&&(this.setState({saving:!0}),this.data.drafts.length?this._updateToParse(t):this._saveNewToParse(t,v["default"].DRAFTED))}},{key:"validate",value:function(){return this.state.userInput&&this.state.userInput.length>400?(this.refs.notificationSystem.addNotification({message:"Your story content must be less than 400 characters!",level:"error"}),!1):!0}},{key:"handleSubmit",value:function(e){this.validate()&&(this.setState({submitting:!0}),this._deleteFromParse(),this._saveNewToParse(this._gatherData(e),v["default"].PENDING))}},{key:"handleChange",value:function(e){this.setState({userInput:e})}},{key:"handleWriteAssist",value:function(e){var t=this;this.state.userInput&&this.state.userInput.length&&(this.setState({assisting:!0}),c.Parse.Cloud.run("getAid",{text:this.state.userInput},function(e){t.setState({aids:JSON.parse(e.text),showHint:!0,assisting:!1})}))}},{key:"_gatherData",value:function(e){e.preventDefault();var t=this.state.userInput.trim();if(t)return t}},{key:"_deleteFromParse",value:function(){this.data.drafts.length&&f["default"].Mutation.Destroy(this.data.drafts[0]).dispatch()}},{key:"_updateToParse",value:function(e){var t=this;f["default"].Mutation.Set(this.data.drafts[0],{content:e}).dispatch().then(function(){t.setState({saving:!1})})}},{key:"_saveNewToParse",value:function(e,t){var n=this;f["default"].Mutation.Create("Page",{content:e,statusRaw:t,refPageId:this.state.refPageId,story:this.state.story,likeCount:0,creator:c.Parse.User.current()}).dispatch().then(function(){t!==v["default"].DRAFTED&&n.setState({userInput:""}),n.setState({submitting:!1}),n.setState({saving:!1})})}},{key:"render",value:function(){var e=this.data.user;return u["default"].createElement("div",{className:"new-submission small-24 large-24 vertical grid-block"},u["default"].createElement(y["default"],{onChange:this.handleChange,value:this.state.userInput,avatarUrl:w["default"].getAvatar(e),aids:this.state.aids,placeholder:"What happens next?",showHint:this.state.showHint}),u["default"].createElement("div",{className:"button-actions grid-block align-right"},u["default"].createElement("div",{className:"small-4 small-offset-1 medium alert hollow button hide",onClick:this.handleCancel.bind(this),ref:"cancelBtn"},"Cancel"),u["default"].createElement("div",{className:"small-5 medium hollow info button",onClick:this.handleWriteAssist.bind(this),ref:"writeAssistBtn"},u["default"].createElement("span",{className:O["default"]({hide:this.state.assisting})},"Write Assist"),u["default"].createElement("div",{className:O["default"]("button-spinner","info",{hide:!this.state.assisting})})),u["default"].createElement("div",{className:"small-5 small-offset-7 medium hollow button",onClick:this.handleSaveDraft.bind(this),ref:"saveDraftBtn"},u["default"].createElement("span",{className:O["default"]({hide:this.state.saving})},"Save Draft"),u["default"].createElement("div",{className:O["default"]("button-spinner",{hide:!this.state.saving})})),u["default"].createElement("div",{className:"small-4 small-offset-1 medium success hollow button",onClick:this.handleSubmit.bind(this),ref:"submitBtn"},u["default"].createElement("span",{className:O["default"]({hide:this.state.submitting})},"Submit"),u["default"].createElement("div",{className:O["default"]("button-spinner","success",{hide:!this.state.submitting})}))),u["default"].createElement("div",null,u["default"].createElement(h["default"],{ref:"notificationSystem"})))}}]),t}(_);t["default"]=P,e.exports=t["default"]},434:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={PENDING:0,APPROVED:1,DISAPPROVED:2,DRAFTED:3};t["default"]=n,e.exports=t["default"]},435:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(436),d=r(c),f=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={text:this.props.value},this.handleChange=this.handleChange.bind(this)}return o(t,e),i(t,[{key:"handleChange",value:function(e){this.setState({text:e}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){return u["default"].createElement("div",{className:"textarea-container grid-block small-2-up"},u["default"].createElement("div",{className:"avatar small-3 align-center"},u["default"].createElement("img",{src:this.props.avatarUrl})),u["default"].createElement(d["default"],{className:"grid-block textarea small-20",onChange:this.handleChange,showHint:this.props.showHint,aids:this.props.aids,text:this.props.value,options:{toolbar:!1,disableReturn:!0,placeholder:{text:this.props.placeholder}}}))}}]),t}(u["default"].Component);t["default"]=f,f.propTypes={avatarUrl:u["default"].PropTypes.string,placeholder:u["default"].PropTypes.string,value:u["default"].PropTypes.string,onChange:u["default"].PropTypes.func,showHint:u["default"].PropTypes.bool},f.defaultProps={avatarUrl:n(319),placeholder:"What happens next?",value:null,showHint:!1},e.exports=t["default"]},436:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);
}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(437),d=r(c),f=n(324),p=r(f),h=n(438),m=r(h),v=n(396),g=(r(v),n(402)),y=(r(g),n(399)),b=r(y),w=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={text:this.props.text,proofreadedText:null,showedHint:!1,initialized:!1},this.showHint=this.showHint.bind(this)}return o(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this,t=u["default"].findDOMNode(this);this.medium=new d["default"](t,this.props.options),this.medium.selectElement(u["default"].findDOMNode(this)),this.medium.subscribe("editableInput",function(t,n){var r=m["default"].getSelection();if(r.isCollapsed){var a=r.getRangeAt(0).startContainer.parentElement;p["default"](a).is("span.aid")&&(e.medium.saveSelection(),p["default"](a).replaceWith(a.textContent),e.medium.restoreSelection())}e.setState({text:p["default"](n).text()}),e.change(p["default"](n).text())})}},{key:"componentWillUnmount",value:function(){this.medium.destroy(),this.hint&&this.hint.destroy()}},{key:"componentWillUpdate",value:function(e,t){this.medium.saveSelection()}},{key:"componentDidUpdate",value:function(e,t){this.medium.restoreSelection()}},{key:"componentWillReceiveProps",value:function(e){!e.text||this.state.text||this.state.initialized||(this.medium.setContent(e.text,0),this.setState({text:e.text,initialized:!0})),e.aids!==this.props.aids&&(this.setState({showedHint:!1}),this.hint=new b["default"](this.state.text,e.aids.tags,!0)),e.showHint&&!this.state.showedHint&&(this.showHint(),this.setState({showedHint:!0}))}},{key:"showHint",value:function(){this.hint&&(this.medium.saveSelection(),this.hint.destroy(),this.medium.restoreSelection()),this.medium.saveSelection(),u["default"].findDOMNode(this).innerHTML=this.hint.htmlContent,this.medium.restoreSelection(),this.hint.showHint()}},{key:"change",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){return u["default"].createElement("div",{className:this.props.className,contentEditable:!0,dangerouslySetHTML:{__html:this.hint&&this.hint.htmlContent||this.state.text}})}}]),t}(u["default"].Component);t["default"]=w,e.exports=t["default"]},439:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},c=n(97),d=r(c),f=n(21),p=n(295),h=r(p),m=n(315),v=r(m),g=n(253),y=r(g),b=n(407),w=r(b),k=n(440),O=r(k),_=h["default"].Component(d["default"]),P=function(e){function t(e){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isFiltering:e.isFiltering,savedPages:e.savedPages},this.data={pages:e.pages,likes:e.likes}}return i(t,e),l(t,[{key:"observe",value:function(e){var t=new f.Parse.Object("Story");t.id=e.storyId;var n=e.refPageId;return{pages:new f.Parse.Query("Page").equalTo("story",t).equalTo("refPageId",n).equalTo("statusRaw",0).ascending("createdAt").include("creator"),user:h["default"].currentUser}}},{key:"refreshStory",value:function(){this.props.refresh()}},{key:"toggleFilter",value:function(){this.setState({isFiltering:!this.state.isFiltering})}},{key:"renderSlider",value:function(){var e=this,t=this.data.pages||[];if(this.state.isFiltering&&(t=t.filter(function(t){return e.state.savedPages[t.id.objectId]})),!t||!t.length)return null;var n={className:"approve-slide-slick"};return d["default"].createElement("div",{className:"approve-slide-slick-wrapper small-up-3 grid-block"},d["default"].createElement(w["default"],{settings:n,key:this.state.isFiltering?"filterOn":"filterOff"},t.map(function(t,n){var r=e.data.likes&&e.data.likes.filter(function(e){return void 0!==e.page&&e.page.id.objectId===t.id.objectId});return d["default"].createElement("div",{key:t.id.objectId},d["default"].createElement(O["default"],s({key:t.id.objectId,isLiked:r.length>0,onSaveClick:e.handlePageSave.bind(e,t),refreshStory:e.refreshStory.bind(e),isSaved:e.state.savedPages[t.id.objectId]},t)))},this)))}},{key:"handlePageSave",value:function(e,t){this.setState({savedPages:y["default"]({},this.state.savedPages,a({},e.id.objectId,t))})}},{key:"render",value:function(){var e=v["default"]({"fa fa-star star-icon":!0,active:this.state.isFiltering});return d["default"].createElement("div",{className:"approve-slider-section"},d["default"].createElement("div",{className:"filter-button grid-container",onClick:this.toggleFilter.bind(this)},d["default"].createElement("i",{className:e})),this.renderSlider())}}]),t}(_);t["default"]=P,P.propTypes={isFiltering:d["default"].PropTypes.bool.isRequired,pages:d["default"].PropTypes.array.isRequired,savedPages:d["default"].PropTypes.object.isRequired,likes:d["default"].PropTypes.array.isRequired},P.defaultProps={isFiltering:!1,pages:[],savedPages:{},likes:[]},e.exports=t["default"]},440:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(21),d=n(295),f=r(d),p=n(315),h=r(p),m=n(389),v=r(m),g=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isSaved:this.props.isSaved}}return o(t,e),i(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.id.objectId!=this.props.id.objectId||t!=this.state}},{key:"handleOnSaveClick",value:function(){var e=!this.state.isSaved;this.setState({isSaved:e}),this.props.onSaveClick(e)}},{key:"handleOnApproveClick",value:function(){var e=this;f["default"].Mutation.Set(this.props,{statusRaw:1}).dispatch().then(function(){c.Parse.Cloud.run("approvePage",{pageId:e.props.objectId},{success:function(t){console.log(t),e.props.refreshStory()},error:function(e){console.log(e)}})})}},{key:"render",value:function(){var e=h["default"]({"fa fa-star":!0,"star-icon":!0,active:this.state.isSaved});return u["default"].createElement("div",{className:"page-actions-row"},u["default"].createElement(v["default"],this.props),u["default"].createElement("div",{className:"footer-buttons"},u["default"].createElement("div",{className:"approve-button info button hollow",onClick:this.handleOnApproveClick.bind(this)},"Approve"),u["default"].createElement("i",{className:e,onClick:this.handleOnSaveClick.bind(this)})))}}]),t}(u["default"].Component);t["default"]=g,g.propTypes={onSaveClick:u["default"].PropTypes.func.isRequired},g.defaultProps={isSaved:!1},e.exports=t["default"]},441:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClickWriteAssist=this.handleClickWriteAssist.bind(this)}return o(t,e),i(t,[{key:"handleClickWriteAssist",value:function(e){this.props.onClick(e)}},{key:"render",value:function(){return u["default"].createElement("div",{className:"write-assist"},u["default"].createElement("a",{onClick:this.handleClickWriteAssist},u["default"].createElement("img",{src:n(this.props.isOn?442:443)})),u["default"].createElement("p",null,this.props.isOn?"Write Assist On":"Write Assist Off"))}}]),t}(u["default"].Component);t["default"]=c,e.exports=t["default"]},442:function(e,t,n){e.exports=n.p+"b430f961f20a701b7da754db57bbc14a.png"},443:function(e,t,n){e.exports=n.p+"204d2050b04681407e254ae478a0e200.png"},444:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(21),d=n(333),f=r(d),p=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.resetPassword=this.resetPassword.bind(this),this.state={error:null,resetSent:!1}}return o(t,e),i(t,[{key:"render",value:function(){var e=void 0,t=void 0;return this.state.error&&(e=u["default"].createElement(f["default"],{messages:[this.state.error]})),t=this.state.resetSent?u["default"].createElement("div",{className:"grid-block align-center"},u["default"].createElement("p",null,"A reset password email has been sent to your email address.")):u["default"].createElement("div",null,u["default"].createElement("input",{ref:"email",className:"email",type:"email",placeholder:"your@email.com"}),u["default"].createElement("div",{className:"grid-block align-right"},u["default"].createElement("input",{className:"button",type:"submit",value:"Reset my password",onClick:this.resetPassword})),e),u["default"].createElement("form",{className:"session grid-block",onKeyDown:this.keyDown},u["default"].createElement("div",{className:"grid-container small-18"},u["default"].createElement("h1",null,"Reset Password"),t))}},{key:"resetPassword",value:function(e){var t=this;e.preventDefault();var n=u["default"].findDOMNode(this.refs.email).value;return n?void c.Parse.Cloud.run("resetPassword",{email:n}).then(function(e){t.setState({error:null,resetSent:!0})},function(e){t.setState({error:e.message})}):void this.setState({error:"Please provide email"})}}]),t}(u["default"].Component);t["default"]=p,e.exports=t["default"]},445:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(325),d=r(c),f=n(316),p=r(f),h=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return null}}],[{key:"willTransitionTo",value:function(e){p["default"].logOut(function(){d["default"]("google").logout(),e.redirect("/")})}}]),t}(l.Component);t["default"]=h,h.contextTypes={router:u["default"].PropTypes.func},e.exports=t["default"]},446:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(333),d=r(c),f=n(447),p=r(f),h=n(315),m=r(h),v=n(452),g=r(v),y=n(453),b=r(y),w=n(295),k=r(w),O=n(21),_=k["default"].Component(u["default"]),P=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={error:null,passwordStrength:0,enableSubmit:!1,newPasswordSaved:!1},this.handlePasswordChange=this.handlePasswordChange.bind(this),this.handleConfirmPasswordChange=this.handleConfirmPasswordChange.bind(this),this.getPassword=this.getPassword.bind(this),this.getConfirmPassword=this.getConfirmPassword.bind(this),this.clickSubmit=this.clickSubmit.bind(this),this.handleAvatarChange=this.handleAvatarChange.bind(this),this.handleAvatarUpload=this.handleAvatarUpload.bind(this)}return o(t,e),i(t,[{key:"observe",value:function(){return{user:k["default"].currentUser}}},{key:"getPassword",value:function(){return u["default"].findDOMNode(this.refs.password).value}},{key:"getConfirmPassword",value:function(){return u["default"].findDOMNode(this.refs.confirmPassword).value}},{key:"handlePasswordChange",value:function(e){var t=p["default"](this.getPassword()).score;this.setState({passwordStrength:t,enableSubmit:t>=2&&this.getPassword()===this.getConfirmPassword()})}},{key:"handleConfirmPasswordChange",value:function(e){this.setState({enableSubmit:this.state.passwordStrength>=2&&this.getPassword()===this.getConfirmPassword()})}},{key:"handleAvatarUpload",value:function(e){var t=this,n=new O.Parse.File("file",e[0]);n.save().then(function(){k["default"].Mutation.Set(t.data.user,{smallAvatar:n}).dispatch()})}},{key:"handleAvatarChange",value:function(e){k["default"].Mutation.Set(this.data.user,{smallAvatar:e.image}).dispatch()}},{key:"clickSubmit",value:function(e){if(e.preventDefault(),this.state.enableSubmit){O.Parse.User.current();k["default"].Mutation.Set(this.data.user,{password:this.getPassword()}).dispatch(),this.setState({newPasswordSaved:!0})}}},{key:"render",value:function(){var e=this.state.passwordStrength,t=this.state.enableSubmit?"":"disabled",n=void 0,r=void 0,a=void 0,o=void 0;switch(this.state.newPasswordSaved&&(o=u["default"].createElement("p",{className:"password-saved-text"},"New password saved")),this.state.error&&(n=u["default"].createElement(d["default"],{messages:[this.state.error]})),e){case 0:a="",r="Password too weak";break;case 1:a="low",r="Password too weak";break;case 2:a="medium",r="Password fair";break;case 3:case 4:a="high",r="Password strong"}return u["default"].createElement("div",null,u["default"].createElement("form",{className:"session grid-block",onKeyDown:this.keyDown},u["default"].createElement("div",{className:"grid-container small-18"},u["default"].createElement("h1",null,"Reset Password"),u["default"].createElement("input",{ref:"password",className:"password",type:"password",placeholder:"New password",onChange:this.handlePasswordChange}),u["default"].createElement("input",{ref:"confirmPassword",className:"confirm-password",type:"password",placeholder:"Confirm your password",onChange:this.handleConfirmPasswordChange}),u["default"].createElement("div",{className:"grid-block align-right"},u["default"].createElement("div",{className:"small-16 grid-block"},u["default"].createElement("progress",{className:a,value:e,max:"4"})),u["default"].createElement("div",{className:"small-6 small-offset-2 align-right grid-block"},u["default"].createElement("p",null,r))),u["default"].createElement("div",{className:"grid-block align-right"},u["default"].createElement("div",{className:"grid-block align-left"},o),u["default"].createElement("div",{className:"grid-block align-right"},u["default"].createElement("input",{className:m["default"]("button",{disabled:t}),type:"submit",value:"Submit",onClick:this.clickSubmit}))),n)),u["default"].createElement(b["default"],{onDrop:this.handleAvatarUpload}),u["default"].createElement(g["default"],{onChange:this.handleAvatarChange}))}}]),t}(_);t["default"]=P,e.exports=t["default"]},452:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(21),d=n(295),f=r(d),p=f["default"].Component(u["default"]),h={onChange:u["default"].PropTypes.func},m=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.onClickImage=this.onClickImage.bind(this)}return o(t,e),i(t,[{key:"observe",value:function(){return{avatars:new c.Parse.Query("Avatar")}}},{key:"renderAvatar",value:function(){var e=this;return this.data.avatars.map(function(t,n){var r=t.image._url;return u["default"].createElement("div",{className:"grid-block align-center",key:t.objectId},u["default"].createElement("a",{onClick:e.onClickImage.bind(e,n)},u["default"].createElement("img",{className:"avatar-img",src:r})))})}},{key:"onClickImage",value:function(e,t){t.preventDefault(),this.props.onChange&&this.props.onChange(this.data.avatars[e])}},{key:"render",value:function(){var e=this.renderAvatar();return u["default"].createElement("div",{className:"choose-avatar-block grid-block"},u["default"].createElement("div",{className:"grid-container small-18 avatar-section"},u["default"].createElement("h2",{className:"avatar-subheading"},"Select"),u["default"].createElement("div",{className:"vertical medium-horizontal grid-block small-up-4"},e)))}}]),t}(p);t["default"]=m,m.propTypes=h,e.exports=t["default"]},453:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=(n(21),n(454)),d=r(c),f=n(295),p=r(f),h=p["default"].Component(u["default"]),m={onDrop:u["default"].PropTypes.func},v=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.onDrop=this.onDrop.bind(this)}return o(t,e),i(t,[{key:"onDrop",value:function(e){this.props.onDrop&&this.props.onDrop(e)}},{key:"observe",value:function(){}},{key:"render",value:function(){return u["default"].createElement("div",{className:"choose-avatar-block grid-block"},u["default"].createElement("div",{className:"grid-container small-18 avatar-section"},u["default"].createElement("h1",null,"Choose avatar"),u["default"].createElement("h2",{className:"avatar-subheading"},"Upload"),u["default"].createElement("div",{className:"grid-block align-center"},u["default"].createElement(d["default"],{onDrop:this.onDrop,className:"avatar-dropzone"},u["default"].createElement("img",{className:"upload-avatar-icon",src:n(456)})))))}}]),t}(h);t["default"]=v,v.propTypes=m,e.exports=t["default"]},456:function(e,t,n){e.exports=n.p+"e3c7d978a3b9677c94fd60542f5c1a1b.png"},457:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.map(function(e){return{label:e.name,value:h["default"](e.name)}})}function s(e){return f["default"](e).groupBy("typeRaw").mapValues(i).value()}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},d=n(392),f=r(d),p=n(458),h=r(p),m=n(97),v=r(m),g=n(21),y=n(295),b=r(y),w=n(327),k=r(w),O=n(460),_=(r(O),n(318)),P=r(_),E=n(335),C=n(461),j=r(C),S=n(435),T=r(S),x=n(468),N=r(x),A=n(471),I=r(A),D=n(472),M=r(D),R=n(473),L=r(R),q=n(315),B=r(q),F=b["default"].Component(v["default"]),H=function(e){function t(e){a(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.validate=this.validate.bind(this),this.handleDrop=this.handleDrop.bind(this),this.updateStory=this.updateStory.bind(this),this.uploadImage=this.uploadImage.bind(this),this.handleCreate=this.handleCreate.bind(this),this.createNewStory=this.createNewStory.bind(this),this.handleSaveDraft=this.handleSaveDraft.bind(this),this.handleTitleChange=this.handleTitleChange.bind(this),this.handleLabelChange=this.handleLabelChange.bind(this),this.handleWriteAssist=this.handleWriteAssist.bind(this),this.getSelectedLabels=this.getSelectedLabels.bind(this),this.handleContentChange=this.handleContentChange.bind(this),this.state={title:e.title,files:e.files,content:null,saveDraft:!1,classOptions:[],genreOptions:[],assignmentOptions:[],miscOptions:[],storyId:null,creating:!1,saving:!1,assisting:!1,_notificationSystem:null,aids:null,initialized:!1,imageUrl:null}}return o(t,e),u(t,[{key:"observe",value:function(e,t){var n=new g.Parse.Query("Story").equalTo("creator",g.Parse.User.current()).equalTo("statusRaw",L["default"].DRAFTED).descending("createdAt"),r={labels:new g.Parse.Query("Label"),user:b["default"].currentUser,stories:n};return r}},{key:"componentDidMount",value:function(){this._notificationSystem=this.refs.notificationSystem}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(!this.state.initialized&&this.data.stories&&this.data.stories.length){var r=this.data.stories[0],a={};this.state.storyId||(a.storyId=r.objectId),this.state.content||(a.content=r.content),this.state.title||(a.title=r.title),!this.state.files&&r.image&&(a.imageUrl=r.image._url?r.image._url:r.image.url),r.labels.length&&!function(){var e=r.labels.map(function(e){return e.objectId}),t=s(n.data.labels.filter(function(t){return-1!==e.indexOf(t.objectId)}));n.state.classOptions.length||(a.classOptions=t[I["default"].CLASS]||[]),n.state.genreOptions.length||(a.genreOptions=t[I["default"].GENRE]||[]),n.state.assignmentOptions.length||(a.assignmentOptions=t[I["default"].ASSIGNMENT]||[]),n.state.miscOptions.length||(a.miscOptions=t[I["default"].MISC]||[])}(),this.setState(l({},a,{initialized:!0}))}}},{key:"uploadImage",value:function(){var e=void 0;if(this.state.files){var t=new g.Parse.File("file",this.state.files[0]);e=t.save()}else e=g.Parse.Promise.as();return e}},{key:"getSelectedLabels",value:function(){var e=this;return[this.state.classOptions,this.state.genreOptions,this.state.assignmentOptions,this.state.miscOptions].map(function(t,n){return t.map(function(t){return e.data.labels.find(function(e){return h["default"](e.name)===t.value&&e.typeRaw===n})})}).reduce(function(e,t){return e.concat(t)})}},{key:"createNewStory",value:function(e){var t=this;return this.uploadImage().then(function(n){return b["default"].Mutation.Create("Story",{approver:t.data.user[0],creator:t.data.user[0],title:t.state.title,content:t.state.content,statusRaw:e,image:n,labels:t.getSelectedLabels(),typeRaw:M["default"].PUBLIC}).dispatch()})}},{key:"updateStory",value:function(e){var t=this;return this.setState({saving:!0}),this.uploadImage().then(function(n){return n&&(e.image=n),b["default"].Mutation.Set(t.data.stories[0],l({},e)).dispatch()}).then(function(e){t.setState({saving:!1})},function(e){t.setState({saving:!1})})}},{key:"handleLabelChange",value:function(e,t,n){var r=this;this.setState({classOptions:e===I["default"].CLASS?n:this.state.classOptions,genreOptions:e===I["default"].GENRE?n:this.state.genreOptions,assignmentOptions:e===I["default"].ASSIGNMENT?n:this.state.assignmentOptions,miscOptions:e===I["default"].MISC?n:this.state.miscOptions});var a=n.map(function(e){var t=h["default"](e.value);return l({},e,{slug:t})});a.filter(function(e){var t=r.data.labels.map(function(e){return h["default"](e.name)});return-1===t.indexOf(e.slug)})}},{key:"handleTitleChange",value:function(e){this.setState({title:e})}},{key:"handleDrop",value:function(e){this.setState({files:e})}},{key:"handleContentChange",value:function(e){this.setState({content:e})}},{key:"handleWriteAssist",value:function(e){var t=this;this.state.content&&this.state.content.length&&(this.setState({assisting:!0}),g.Parse.Cloud.run("getAid",{text:this.state.content},function(e){t.setState({aids:JSON.parse(e.text),showHint:!0,assisting:!1})}))}},{key:"handleSaveDraft",value:function(e){var t=this;e.preventDefault(),this.state.content&&this.state.content.length>400?this._notificationSystem.addNotification({message:"Your story content must be less than 400 characters!",level:"error"}):this.state.saving||(this.state.storyId?this.updateStory({content:this.state.content,labels:this.getSelectedLabels(),title:this.state.title}).then(function(e){t.setState({saving:!1})}):(this.createNewStory(L["default"].DRAFTED).then(function(e){t.setState({storyId:e.objectId}),t.refreshQueries(),t.setState({saving:!1})}),this.setState({saveDraft:!0})))}},{key:"validate",value:function(){return this.state.title?this.state.files||this.state.imageUrl?this.state.content&&this.state.content.length>400?(this._notificationSystem.addNotification({message:"Your story content must be less than 400 characters!",level:"error"}),!1):!0:(this._notificationSystem.addNotification({
message:"Your story must have a picture!",level:"error"}),!1):(this._notificationSystem.addNotification({message:"Your story must have a Title!",level:"error"}),!1)}},{key:"handleCreate",value:function(e){var t=this;e.preventDefault(),this.validate()&&!this.state.creating&&(console.log("validated"),this.setState({creating:!0}),this.state.storyId?this.updateStory({content:this.state.content,labels:this.getSelectedLabels(),statusRaw:L["default"].ONGOING}).then(function(e){t.setState({creating:!1}),t.context.router.transitionTo("story",{id:t.state.storyId})}):this.createNewStory(L["default"].ONGOING).then(function(e){t.setState({creating:!1}),t.context.router.transitionTo("story",{id:e.objectId})}))}},{key:"render",value:function(){var e=s(this.data.labels),t=this.data.user;return v["default"].createElement("section",{className:"story vertical"},v["default"].createElement("div",{className:"story-container grid-block"},v["default"].createElement(N["default"],{onChange:this.handleTitleChange,onDrop:this.handleDrop,title:this.state.title,imageUrl:this.state.imageUrl})),v["default"].createElement("div",{className:"new-story-content grid-container"},v["default"].createElement("div",{className:"grid-block labels"},v["default"].createElement("div",{className:"grid-block vertical"},v["default"].createElement(j["default"],{name:"Class",value:this.state.classOptions,options:e[I["default"].CLASS],onChange:this.handleLabelChange.bind(this,I["default"].CLASS)}),v["default"].createElement(j["default"],{name:"Genre",value:this.state.genreOptions,options:e[I["default"].GENRE],onChange:this.handleLabelChange.bind(this,I["default"].GENRE)}),v["default"].createElement(j["default"],{name:"Assignment",value:this.state.assignmentOptions,options:e[I["default"].ASSIGNMENT],onChange:this.handleLabelChange.bind(this,I["default"].ASSIGNMENT)}),v["default"].createElement(j["default"],{name:"Misc",value:this.state.miscOptions,options:e[I["default"].MISC],onChange:this.handleLabelChange.bind(this,I["default"].MISC)}))),v["default"].createElement("div",{className:"new-submission vertical grid-block"},v["default"].createElement(T["default"],{placeholder:"Write the first bit (optional)",avatarUrl:P["default"].getAvatar(t),onChange:this.handleContentChange,aids:this.state.aids,showHint:this.state.showHint,value:this.state.content}),v["default"].createElement("div",{className:"button-actions grid-block align-right"},v["default"].createElement("div",{className:"small-4 small-offset-1 medium alert hollow button hide"},"Cancel",v["default"].createElement("div",{className:"button-spinner alert"})),v["default"].createElement("div",{className:"small-5 medium hollow info button",onClick:this.handleWriteAssist,ref:"writeAssistBtn"},v["default"].createElement("span",{className:B["default"]({hide:this.state.assisting})},"Write Assist"),v["default"].createElement("div",{className:B["default"]("button-spinner","info",{hide:!this.state.assisting})})),v["default"].createElement("div",{className:"small-5 small-offset-7 medium hollow button",onClick:this.handleSaveDraft},v["default"].createElement("span",{className:B["default"]({hide:this.state.saving})},"Save Draft"),v["default"].createElement("div",{className:B["default"]("button-spinner",{hide:!this.state.saving})})),v["default"].createElement("div",{className:"create-button small-4 small-offset-1 medium success hollow button",onClick:this.handleCreate},v["default"].createElement("span",{className:B["default"]({hide:this.state.creating})},"Create"),v["default"].createElement("div",{className:B["default"]("button-spinner","success",{hide:!this.state.creating})})),v["default"].createElement("div",null,v["default"].createElement(k["default"],{ref:"notificationSystem"}))))))}}]),t}(F);t["default"]=E.requireAuth(H);var U=H;t.undecorated=U,H.contextTypes={router:v["default"].PropTypes.func},H.defaultProps={title:null,files:null}},461:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},u=n(97),c=r(u),d=n(462),f=r(d),p=n(467),h=r(p),m=function(e){function t(e){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return o(t,e),s(t,[{key:"render",value:function(){return c["default"].createElement("div",{className:"select-labels grid-block"},c["default"].createElement("div",{className:"grid-content shrink v-align"},this.props.name+" : "),c["default"].createElement("div",{className:"grid-content"},c["default"].createElement(f["default"],i({multi:!0,clearable:!1,placeholder:"",valueComponent:h["default"]},this.props))))}}]),t}(c["default"].Component);t["default"]=m,m.propTypes={allowCreate:c["default"].PropTypes.bool,options:c["default"].PropTypes.array},m.defaultProps={allowCreate:!1},e.exports=t["default"]},467:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.blockEvent=this.blockEvent.bind(this),this.handleOnRemove=this.handleOnRemove.bind(this)}return o(t,e),i(t,[{key:"blockEvent",value:function(e){e.stopPropagation()}},{key:"handleOnRemove",value:function(e){this.props.disabled||this.props.onRemove(e)}},{key:"render",value:function(){var e=this.props.option.label;return this.props.renderer&&(e=this.props.renderer(this.props.option)),this.props.onRemove||this.props.optionLabelClick?(this.props.optionLabelClick&&(e=u["default"].createElement("a",{className:"Select-item-label__a",onMouseDown:this.blockEvent,onTouchEnd:this.props.onOptionLabelClick,onClick:this.props.onOptionLabelClick},e)),u["default"].createElement("div",{className:"select-item"},u["default"].createElement("span",{className:"select-label"},e),u["default"].createElement("span",{className:"select-icon",onMouseDown:this.blockEvent,onClick:this.handleOnRemove,onTouchEnd:this.handleOnRemove},"×"))):u["default"].createElement("div",{className:"Select-value"},e)}}]),t}(u["default"].Component);c.propTypes={disabled:u["default"].PropTypes.bool,onOptionLabelClick:u["default"].PropTypes.func,onRemove:u["default"].PropTypes.func,option:u["default"].PropTypes.object.isRequired,optionLabelClick:u["default"].PropTypes.bool,renderer:u["default"].PropTypes.func},t["default"]=c,e.exports=t["default"]},468:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;s=u=l=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(i)}var u=Object.getPrototypeOf(a);if(null===u)return void 0;e=u,t=o,n=i,r=!0}},l=n(97),u=r(l),c=n(454),d=r(c),f=n(469),p=function(e){function t(e){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={image:null,title:"",initialized:!1},this.onDrop=this.onDrop.bind(this),this.titleGeneratorClick=this.titleGeneratorClick.bind(this),this.titleCreate=this.titleCreate.bind(this)}return o(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){e.title&&!this.state.title&&this.setState({title:e.title})}},{key:"onDrop",value:function(e){this.setState({image:e[0]}),this.props.onDrop(e)}},{key:"titleGeneratorClick",value:function(){var e=f.randomTitleGenerator();this.setState({title:e}),this.props.onChange(e)}},{key:"titleCreate",value:function(e){this.setState({title:e.target.value}),this.props.onChange(e.target.value)}},{key:"render",value:function(){var e={position:"absolute",top:0,left:0,bottom:0,right:0},t=this.state.image&&this.state.image.preview||this.props.imageUrl;return u["default"].createElement("div",{className:"grid-container"},u["default"].createElement("div",{className:"vertical grid-block"},u["default"].createElement("div",{className:"story-header editable"},u["default"].createElement(d["default"],{onDrop:this.onDrop,style:e},u["default"].createElement("img",{className:"upload-icon",src:n(456)}),u["default"].createElement("img",{className:"preview",src:t})),u["default"].createElement("div",{className:"gradient"}),u["default"].createElement("a",{onClick:this.titleGeneratorClick},u["default"].createElement("img",{className:"story-slotmachine-icon",src:n(470)})),u["default"].createElement("input",{className:"story-title",name:"story-title",type:"text",placeholder:"Title",value:this.state.title,onChange:this.titleCreate}))))}}]),t}(u["default"].Component);t["default"]=p,e.exports=t["default"]},469:function(e,t){"use strict";function n(){function e(){var e=0;switch(e=Math.floor(41*Math.random())){case 0:return f[P]+" "+c[O];case 1:return f[P]+" "+c[O]+"s";case 2:return"The "+f[P]+" "+c[O];case 3:return"The "+f[P]+" "+c[O]+"s";case 4:return"The "+f[P]+" "+c[O]+"'s "+c[_];case 5:return"The "+f[P]+" "+c[O]+" "+c[_];case 6:return"The "+f[P]+" "+c[O]+" "+i[S]+" the "+c[_];case 7:return d[D]+", the "+c[O]+" "+c[_];case 8:return c[O];case 9:return"The "+c[O];case 10:return c[O]+"born";case 11:return"The "+c[O]+c[_];case 12:return c[O]+" "+c[_];case 13:return c[O]+" and "+c[_];case 14:return c[O]+" and a "+c[_];case 15:return"The "+c[O]+" and the "+c[_];case 16:return c[O]+" and the "+f[P]+" "+c[_];case 17:return"The "+c[O]+" and the "+f[P]+" "+c[_];case 18:return c[O]+"less";case 19:return c[O]+"'s "+f[P]+" "+c[_];case 20:return c[O]+"'s "+c[_];case 21:return c[O]+"s and "+c[_]+"s ";case 22:return c[O]+" of "+c[_];case 23:return c[O]+" of "+f[P]+" "+c[_];case 24:return c[O]+" of the "+c[_];case 25:return"The "+c[O]+" of "+c[_];case 26:return"The "+c[O]+" of "+d[D];case 26:return c[O]+" "+i[S]+" the "+c[_];case 27:return"The "+c[O]+" "+i[S]+" the "+c[_];case 28:return"The "+c[O]+" "+i[S];case 29:return"The "+c[O]+" "+u[I]+" "+f[P];case 30:return"The "+c[O]+" "+c[_];case 31:return"The "+c[O]+"-"+c[_];case 32:return"The "+c[O]+"'s "+c[_];case 33:return"The "+c[O]+" the "+c[_]+" "+h[C];case 34:return"A "+c[O]+" "+h[C];case 35:return c[O]+" "+g[N];case 36:return i[S]+" the "+c[O];case 37:return i[S]+" the "+c[O]+" and the "+c[_];case 38:return i[S]+" the "+f[P]+" "+c[O];case 39:return"The "+h[C]+" "+c[O];case 40:return"The "+g[N]+" "+c[O]}}function t(){k=Math.floor(Math.random()*l.length),O=Math.floor(Math.random()*c.length),_=Math.floor(Math.random()*c.length),D=Math.floor(Math.random()*d.length),P=Math.floor(Math.random()*f.length),E=Math.floor(Math.random()*f.length),C=Math.floor(Math.random()*h.length),j=Math.floor(Math.random()*v.length),S=Math.floor(Math.random()*i.length),T=Math.floor(Math.random()*s.length),x=Math.floor(Math.random()*p.length),N=Math.floor(Math.random()*g.length),A=Math.floor(Math.random()*m.length),I=Math.floor(Math.random()*u.length)}function n(){return a(),o(),r(),t(),e()}function r(){d=b}function a(){c=w}function o(){f=y}var i=new Array("Above","Across","After","At","Beyond","For","From","In","Into","On","Out Of","With","Without","Under"),s=new Array("Could","Could Not","Must","Must Not","Shall","Shall Not","Should","Should Not","That","That Never","Would","Would Not"),l=new Array("a","the"),u=new Array("Is","Was","Will Be","Was Not","Is Not","Will Not Be"),c=new Array("Noun"),d=new Array("Names"),f=new Array("Adjective"),p=new Array("Accuse","Burn","Be","Borrow","Build","Close","Conquer","Chain","Chase","Come","Change","Die","Drag","Dream","Embrace","Forget","Fall","Fight","Go","Hang","Have","Kill","Live","Laugh","Lie","Murder","Own","Reveal","Rise","Run","Ride","Stop","Save","See","Speak","Steal","Seduce","Scream","Trick","Weave","Whisper","Weep"),h=new Array("Accused","Burned","Borrowed","Built","Closed","Conquered","Came","Chained","Changed","Chased","Died","Dragged","Dreamed","Embraced","Forgot","Fell","Fought","Had","Hung","Killed","Lived","Laughed","Lied","Murdered","Owned","Revealed","Rose","Ran","Rode","Stopped","Saved","Seduced","Spoke","Stole","Saw","Screamed","Tricked","Weaved","Whispered","Went","Wept"),m=new Array("Accuser","Burner","Borrower","Builder","Closer","Conqueror","Changer","Chaser","Dreamer","Embracer","Fighter","Killer","Laugher","Liar","Murderer","Owner","Revealer","Runner","Rider","Saviour","Seducer","Speaker","Screamer","Trickster","Weaver","Whisperer"),v=new Array("Accuses","Burns","Borrows","Builds","Closes","Conquers","Comes","Chains","Changes","Chases","Drags","Dreams","Dies","Embraces","Forgets","Falls","Fights","Lives","Laughs","Lies","Murders","Owns","Reveals","Rises","Runs","Rides","Stops","Saves","Seduces","Speaks","Steals","Sees","Screams","Weaves","Whispers","Weeps"),g=new Array("Accusing","Burning","Borrowing","Building","Closing","Conquering","Coming","Chaining","Changing","Chasing","Dragging","Dreaming","Dying","Embracing","Forgetting","Falling","Fighting","Living","Laughing","Lying","Murdering","Owning","Revealing","Rising","Running","Riding","Stopping","Saving","Seducing","Stealing","Seeing","Screaming","Weaving","Whispering","Weeping"),y=new Array("Accidental","Accusing","Amazing","Automatic","Aztec","Black","Bound","Broken","Birthday","Bangkok","Bad","Big","Black","Bloodstained","Blue","Cold","Closing","Cold","Conquering","Corrupt","Cosmic","Consuming","Closed","Clutching","Crystal","Dead","Damned","Dancing","Dark","Daylight","Dead-Alive","Dear","Delicate","Destroying","Different","Dimensional","Eastern","Edible","English","Eternal","Evening","Eight","Eighth","Flaming","Fallen","Final","Flapping","Forever","Forty","Frozen","First","Four","Fourth","Five","Fifth","Golden","Gray","Great","Gray","Great","Green","Grey","Hairy","Hidden","Infernal","Invisible","Imaginary","Imitation","Iron","Lost","Last","Lead","Living","Logical","Mortal","Mysterious","Mad","Midnight","Missing","Moonlit","Muddy","My","Northern","New","Next","Noble","Nomadic","Nine","Ninth","One","Orange","Path","Purple","Perfect","Poor","Poisoned","Priceless","Red","Reckless","Radiant","Raw","Scarlet","Secret","Seventh","Southern","Sealed","Savage","Second","Shattered","Silent","Silver","Six","Spare","Special","Strange","Steel","Supreme","Sixth","Seven","Seventh","Third","Tragic","Twenty","Two","Three","Ten","Tenth","Underwater","Unknown","Ultimate","Unrequited","Urban","Uncommon","Unfaithful","Unseen","Variable","Velvet","Violet","Western","Wicked","Weird","Wayward","Weaving","Whispering","Yellow","Fae","Magic","Dead","Dark","Darkness","Gothic","Grim","Grisly","Hideous","Haunting","Phantom","Undead","Vampiric","Atomic","Quantum","Space","Brass","Clockwork","Copper","Electric","Extraordinary","Equation","Ether","Gilded","Galvanic","Impossible","Martian","Mechanical","Sky","Steampunk","Steam-Powered","Tarnished","Victorian"),b=new Array("Alexander","Angelo","Barbara","Caesar","Cleopatra","Charles","David","Dorothy","Da Vinci","Elizabeth","Einstein","Hercules","Hamlet","Hitler","Houdini","James","Jeeves","Jennifer","Jesus","John","Joseph","Jenny Everywhere","Joan of Arc","Johnny","Linda","Long John Silver","Margaret","Maria","Mary","Michael","Marquis de Sade","Mozart","Napoleon","Patricia","Robin Hood","Oona","Satan","Susan","Shakespeare","Thog","Thomas","William","Achilles","Aladdin","Ali Baba","Alice","Baron Munchausen","Bluebeard","Boudicia","Cinderella","Captain Hook","King Arthur","Lancelot","Merlin","Cthulhu","Dracula","Faust","Frankenstein","Hastur","Herbert West","Lovecraft","Allan Quartermain","Captain Nemo","Doctor Jeckyl","Frankenstein","Queen Victoria","Sherlock Holmes","Tarzan","The Artful Dodger","Tom Sawyer","Tesla","Zorro"),w=new Array("Adventure","Affair","Africa","Age","Air","Angel","Ape","Apocalypse","Armageddon","Ash","Avenger","Awakening","Basket","Bat","Beard","Beast","Bird","Birthday Present","Bishop","Black","Blade","Blood","Body","Bomb","Book","Bridge","Blog","Blogger","Blonde","Bloodline","Bookkeeper","Bones","Boy","Brain","Bridge","Bronze","Brother","Bullet","Bus","Butterfly","Cabin","Cabinet","Call","Canary","Cape","Card","Carnival","Case","Cave","Cavern","Cell","Chair","Chance","Chicago","Child","Childhood","Children","Circle","Circus","City","Claim","Club","Cloven Hoof","Coast","Cold","Comb","Compendium","Cove","Creek","Crow","Cry","Cup","Cupid","Cylinder","Daughter","Dance","Dancer","Dawn","Daylight","Day","Deception","Departed","Desert","Detective","Discovery","Doctor","Devil","Dog","Dome","Door","Drapes","Dream","Dust","Dusk","Dweller","Earth","East","Eater","Escape","Evening","Edge","Elysium","Eons","Eternity","Escape","Evolution","Exile","Express","Evil","Eye","Face","Fall","Fate","Fire","Floor","Fog","Fangs","Farm House","Fear","Feast","Feet","Fiend","Fire","Fish","Flame","Floor","Flower","Fog","Folk","Force","Fox","Game","Girl","Glass","Guard","Gambit","Garden","Gentleman","Girl","Gateway","Glory","Glass","God","Gold","Grace","Guard","Guardian","Guest","Gun","Gunfighter","Gunsmoke","Hall","Hand","Heart","Heirloom","House","Hamlet","Hare","Hate","Haunt","Health","Heaven","Heist","Hero","Hieroglyph","Highway","Hollywood","Home","Honor","Horde","Hour","Human","Iron","Idol","Inheritance","Inferno","Intention","Insect","Island","Jackal","Jailer","Jungle","Jars","Jailer","Jewels","Joan of Arc","Journey","Kiss","Key","Kitchen","Killer","Land","Law","Legion","Legionnaire","Light","Legacy","Letters","Life","Lightning","Link","Lord","Man","Master","Midnight","Moon","Moonlight","Manhattan","Manor","Manuscript","March","Mask","Memory","Men","Mesa","Metronome","Mind","Minute","Mirror","Mistletoe","Modern","Mountain","Murder","Music-Box","Mystery","Night","North","Nail","Name","Neighbor","Night","North","Nothing","Nowhere","Opportunity","Options","Orchid","Patch","Parlour","Place","Plant","Present","Pain","Paradox","Party","Patch","Path","Patrol","People","Pet","Pilgrim","Piper","Pirate","Plan","Player","Power","Prague","Priestess","Protest","Punch","Rabbit","Rat","Reply","Return","Revenge","Revolt","Revolution","Rider","Ring","River","Room","Ruler","Rule","Sea","Secret","Scar","Sky","Smith","Snake","Soul","South","Steel","Storm","Sun","Salvage","Seal","Season","Shell","Silence","Sip","Skunk","Slab","Sleep","Sleeper","Soldiers","Song","South","Spawn","Step","Stranger","Studio","Study","Suicide","Survivor","Tale","Thing","Thunder","Time","Touch","Tartarus","They","Thief","Ticket","Tiger","Toad","Tommy","Tower","Trade","Trail","Train","Treasures","Tree","Us","Vengeance","Voice","Valley","Vial","War","Wave","Well","West","Will","Wish","Wolf","Wolfhound","World","Wall","Watcher","Water","Wax","We","Web","What Waits","Wind","Window","Wings","Witch","Woodcarver","Woman","Women","Woods","Worm","Wrath","Wretched","Abbey","Amulet","Atlantis","Blade","Blight","Castle","Court","Crown","Curse","Duke","Demon","Dragon","Emperor","Empire","Faerie","Goblet","Goblins","Kingdom","King","Leviathan","Magic","Phoenix","Princess","Paladin","Queen","Quest","Sword","Sorcery","Tsar","Warlord","Abbey","Amulet","Asylum","Beast","Bite","Blade","Blight","Chain","Cemetery","Corpse","Casket","Curse","Death","Dead","Demon","Doom","Fear","Fiend","Gallows","Ghost","Ghoul","Grave","Graveyard","Hell","Horror","Incubus","Madman","Madness","Monster","Nightmare","Phantom","Prey","Reaper","Shadow","Skull","Succubus","Scream","Terror","Tomb","Tombstone","Vampire","Zombie","Alien","Captain","Comet","Equation","Future","Machine","Mars","Scientist","Science","Space","Star","Affair","Airship","Automaton","Atlantis","Captain","Caravan","Castle","Clocktower","Cog","Corset","Cowboy","Damnation","Detective","Device","Dragoon","Duke","Gentleman","Gentlewoman","Emperor","Engine","Engineer","Ether","Express","Gear","Horizon","Legacy","London","Machine","Magistrate","Mars","Nautilus","Plague","Progress","Queen","Sorcery","Steam","Timepiece","Tinkerer","Zeppelin"),k=0,O=0,_=0,P=0,E=0,C=0,j=0,S=0,T=0,x=0,N=0,A=0,I=0,D=0;return n()}Object.defineProperty(t,"__esModule",{value:!0}),t.randomTitleGenerator=n},470:function(e,t,n){e.exports=n.p+"5f3cec26aa3666688ecee25dee21033d.png"},471:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={CLASS:0,GENRE:1,ASSIGNMENT:2,MISC:3};t["default"]=n,e.exports=t["default"]},472:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={PUBLIC:0,PRIVATE:1,OPEN:2};t["default"]=n,e.exports=t["default"]},473:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ONGOING:0,COMPLETED:1,DELETED:2,DRAFTED:3};t["default"]=n,e.exports=t["default"]}});
//# sourceMappingURL=app.b0d42cc44a83b4a59937.js.map